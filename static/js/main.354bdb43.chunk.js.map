{"version":3,"sources":["js/SpecGlossMultiUVInstanceExample.js","js/SpecGlossMultiUVInstanceExample3.js","js/SpecGlossMultiUVInstanceExample2.js","js/SpecGlossMultiUVInstanceExample4.js","components/Hooks.js","components/Loading.js","components/Error.js","components/Success.js","components/ScreenWidth.js","components/useScreenWidth.js","components/PlacentaNoClass.js","components/PlacentaNo.js","App.js","components/SubText.js","serviceWorker.js","index.js"],"names":["addOrMergeProp","material","propName","data","Object","assign","toJSON","res","THREE","prototype","call","this","undefined","_serializationManager","serialize","bind","afterSerialize","setUvTransform","tx","ty","sx","sy","rotation","cx","cy","c","Math","cos","s","sin","set","join","DEFAULT_MAP_LIST","PROP_TO_CHUNK_MAP","mapRegex","getReplaceString","mapName","getUniformNameFromProp","prop","addMapTransformPropsToMaterial","_mapName","shaderUniforms","value","x","y","decorateMaterialWithPerMapTransforms","mapList","isPerMapTransformExtended","shaderIncludes","i","length","uniform","type","stage","lookup","isSpecGlossExtended","push","chunkName","shaderChunk","replace","SerializationManager","addFunction","meta","metadata","extensions","forEach","toArray","addAfterFunction","roughnessMap","roughness","metalnessMap","metalness","processFunctions","afterFunctions","func","f","SHADER_INCLUDES_SPEC_GLOSS","roughnessmap_fragment","metalnessmap_fragment","lights_physical_fragment","decorateMaterialWithSpecGloss","specular","setHex","glossiness","glossinessMap","specularMap","USE_GLOSSINESSMAP","defineProperty","get","v","getHex","isTexture","uuid","decorateMaterialWithSimpleInstancing","isSimpleInstanceExtended","begin_vertex","onBeforeCompile","shader","uniforms","uTime","userData","vertexShader","decorateMaterialWithSimpleInstancing2","uScale","Status","useMailChimp","url","React","useState","status","setStatus","error","setError","setValue","subscribe","useCallback","params","keys","map","key","toQueryString","newUrl","jsonp","param","err","console","log","msg","result","Loading","props","Component","Error","handleSubmit","defaultErrorMsg","noatErrorMsg","alreadyErrorMsg","domainErrorMsg","emptyErrorMsg","name","state","display","displayForm","e","setState","onClickk","className","style","onClick","Success","ScreenWidth","children","thingy","thingy2","firstName","email","form","setForm","status2","setStatus2","useMailchimp","handleInputChange","event","target","statusChange","includes","onSubmit","preventDefault","autocomplete","id","placeholder","onChange","FNAME","EMAIL","useScreenWidth","mom","son","INSTANCES","gltfScale","firstTime","projectTitles","projectTitles2","projectLinks","tableShow","creditShow","marqueeHovered","marqueeHovered2","focusCounter","randDic","randDic2","arrowSymbols","PlacentaNoClass","updateRnd","newSecondRndTxt","newThirdRndTxt","newFourthRndTxt","randInt","floor","random","randInt2","randInt_","randInt3","randInt__","randInt4","secondRnd","thirdRnd","fourthRnd","updateArrow","symbolLength","isMobile","window","innerHeight","mymyText","updateFocus","counterReminder","tf","focusEvent2","meshArr","focusEvent","sceneSetup","innerWidth","height","elmnt","document","getElementById","tableHeight","offsetHeight","tableTop","isBrowser","scene","mouseX","mouseY","mouse","targetX","targetY","clock","camera","position","z","light","add","ambient","renderer","physicallyCorrectLights","outputEncoding","setPixelRatio","devicePixelRatio","setSize","stats","Stats","offsetAttArr","scaleAttArr","matArraySize","matrixArray","Float32Array","matrixAttributeArray","matrixArray2","matrixAttributeArray2","matrixArray3","matrixAttributeArray3","matrixArray4","matrixAttributeArray4","matrixArray5","matrixAttributeArray5","initInstanceAttributesExtended","mesh","mesh2","mesh3","mesh4","initTexture","initBall","loadGLTF","loadGLTF2","startAnimationLoop","el","appendChild","domElement","addEventListener","onDocumentMouseMove","myThis","loader","GLTFLoader","dracoLoader","DRACOLoader","setDecoderPath","setDRACOLoader","ddsLoader","DDSLoader","setDDSLoader","loadStartTime","performance","now","load","gltf","object","info","toFixed","traverse","node","isMeshStandardMaterial","isShaderMaterial","envMap","needsUpdate","PI","scale","meshGLTF","frustumCulled","geometry","materialGLTF","applyInstancingToMeshExtended","gltf2","meshGLTF2","materialGLTF2","logoOpacity","drdLogo","interval","setInterval","texture","wrapS","wrapT","texture3","texture4","texture5","texture6","mapping","encoding","material2","material3","material4","material5","mesh5","max","minus","minus2","minus3","array","attArray","meshName","n","nurbsControlPoints","nurbsKnots","knot","clamp","positions","NURBSCurve","getSpacedPoints","offsets","scales","l","index","instanceOffsetAttribute2","instanceScaleAttribute2","indecis","addAttribute","uSelected","customDepthMaterial","depthPacking","copy","instanceCount","setAttribute","windowHalfX","windowHalfY","myThis2","clientX","clientY","emissive","r","g","b","emissiveIntensity","projectTitle","goEvent","ev","mHeight","modalTop","modalLeft","petitDisplay","goEvent2","goEventClicked","titleClicked","uterusImg","projectLink","marqueeTxt","marqueePointer","delta","getDelta","time","selected","render","end","requestID","requestAnimationFrame","removeModal","test","tableDisplay","changeRowColor","rowColor","rowTextColor","rowColor2","rowTextColor2","rowColor3","rowTextColor3","rowColor4","rowTextColor4","changeRowColor2","changeRowColor3","changeRowColor4","handleZIndex","formZIndex","showTable","width","documentElement","clientWidth","clientHeight","showTableRow","seTop","showDesc","tableFontSize","marqueeFontSize","clearInterval","tempCreditShow","creditDisplay","showCredit","toggleMarqueeHover","marqueeHover","toggleMarqueeHover2","marqueeHover2","handleWindowResize","wWidth","wHeight","aspect","updateProjectionMatrix","marqueeDisplay","titleWidth","titleHeight","titlePointerEvents","titleImageWidth","titleImageDisplay","focus","removeEventListener","cancelAnimationFrame","overflowY","top","left","ref","background","backgroundImage","onMouseEnter","onMouseLeave","fontSize","cursor","href","src","color","zIndex","class","viewBox","baseFrequency","numOctaves","seed","stitchTiles","in","in2","data-min-scale","data-max-scale","xChannelSelector","yChannelSelector","filterUnits","data-filter-type","d","fill","filter","overflow","PlacentaNoq","withOrientationChange","PlacentaNo","PlacentaNowhay","App","createClass","margin","Switch","Route","exact","path","Boolean","location","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.354bdb43.chunk.js","sourcesContent":["// some utils\r\n\r\nimport * as THREE from \"three\";\r\n\r\nfunction addOrMergeProp( material, propName, data ) {\r\n\r\n\tif ( material[ propName ] ) {\r\n\r\n\t\tObject.assign( material[ propName ], data );\r\n\r\n\t} else {\r\n\r\n\t\tmaterial[ propName ] = data;\r\n\r\n\t}\r\n\r\n}\r\n\r\n//serialize\r\nfunction toJSON(){\r\n\tvar res = THREE.Material.prototype.toJSON.call(\r\n\t\tthis, \r\n\t\tundefined, \r\n\t\tthis._serializationManager.serialize.bind(this._serializationManager)\r\n\t)\r\n\tthis._serializationManager.afterSerialize.call(this._serializationManager,res)\r\n\treturn res\r\n}\r\n\r\n// from three's texture transform api, to be applied to a uniform matrix\r\nfunction setUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\tvar c = Math.cos( rotation );\r\n\tvar s = Math.sin( rotation );\r\n\r\n\tthis.set(\r\n\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t0, 0, 0\r\n\t);\r\n\r\n}\r\n\r\n//spec gloss stuff ---------------------------------------------------------\r\n\r\n//this extends the shader to use specular gloss PBR model instead of rough/metal\r\n\r\nvar specularMapFragmentChunk = [\r\n\t'vec3 specularFactor = specular;',\r\n\t'#ifdef USE_SPECULARMAP',\r\n\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t'#endif',\r\n\t// 'gl_FragColor = vec4(vec3(specularFactor),1.);',\r\n\t// 'return;',\r\n].join( '\\n' );\r\n\r\nvar glossinessMapFragmentChunk = [\r\n\t'float glossinessFactor = glossiness;',\r\n\t'#ifdef USE_GLOSSINESSMAP',\r\n\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t// 'gl_FragColor = vec4(vec3(glossinessFactor),1.);',\r\n\t// 'return;',\r\n\t'#endif',\r\n].join( '\\n' );\r\n\r\nvar lightPhysicalFragmentChunk = [\r\n\t'PhysicalMaterial material;',\r\n\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t'material.specularColor = specularFactor.rgb;',\r\n].join( '\\n' );\r\n\r\nvar SHADER_INCLUDES_SPEC_GLOSS = {\r\n\troughnessmap_fragment: specularMapFragmentChunk,\r\n\tmetalnessmap_fragment: glossinessMapFragmentChunk,\r\n\tlights_physical_fragment: lightPhysicalFragmentChunk,\r\n};\r\n\r\nexport function decorateMaterialWithSpecGloss( material ) {\r\n\r\n\tif ( material.isSpecGlossExtended ) return material;\r\n\r\n\tmaterial.isSpecGlossExtended = true;\r\n\r\n\t// these are the extra uniforms, but instead of being stored in .userData, or some such place\r\n\t// a designated prop could be used\r\n\tvar shaderUniforms = {\r\n\t\tspecular: { value: new THREE.Color().setHex( 0xffffff ), type: 'vec3', stage: 'fragment' }, //fragment can be ommitted (defaults to it) but for sake of clarity\r\n\t\tglossiness: { value: 1, type: 'float', stage: 'fragment' },\r\n\t\tglossinessMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t\tspecularMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t};\r\n\r\n\tvar shaderIncludes = Object.assign({},SHADER_INCLUDES_SPEC_GLOSS)\r\n\r\n\tvar defines = {USE_GLOSSINESSMAP: ''}\r\n\r\n\t//conflicts could be resolved here\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\taddOrMergeProp( material, 'defines', defines );\r\n\r\n\tdelete material.metalnessMap\r\n\tdelete material.roughnessMap\r\n\r\n\t//expose uniforms as props for a cleaner interface (but shaderUniforms is also available so this can be omitted)\r\n\t//it just leads to a cleaner more familiar interface (PhongMaterial has specularMap, so this now has it too)\r\n\tfor ( let propName in shaderUniforms ) {\r\n\r\n\t\tObject.defineProperty( material, propName, {\r\n\t\t\tget: ()=> shaderUniforms[ propName ].value,\r\n\t\t\tset: ( v )=> (shaderUniforms[ propName ].value = v),\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\tvar f = function(data,meta){\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSpecGlossExtended = true\r\n\t\tdata.glossiness = this.glossiness\r\n\t\tdata.specular = this.specular.getHex()\r\n\t\tif(this.glossinessMap && this.glossinessMap.isTexture) data.glossinessMap = this.glossinessMap.toJSON( meta ).uuid \r\n\t}.bind(material)\r\n\r\n\tmaterial._serializationManager.addFunction(f)\r\n\t\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n// multi uv stuff ---------------------------------------------------------\r\n\r\n// this moves the transform from textures to the material, textures become just data\r\n\r\n//list of maps to be extended, these are easy\r\nvar DEFAULT_MAP_LIST = [\r\n\t'alphaMap',\r\n\t'specularMap',\r\n\t'map',\r\n\t'emissiveMap',\r\n\t'metalnessMap',\r\n\t'roughnessMap',\r\n\t'glossinessMap' //this one is from the other example, but if its there it should work, this can be solved to work together somehow\r\n];\r\n\r\n//this can be programatic\r\n//it tells the extension where to look for certain maps\r\n//these follow the /texture2D( $mapname, vUv )/ pattern\r\n//normal map is a bit more complex and would require a non programatic chunk \r\nvar PROP_TO_CHUNK_MAP = {\r\n\t'alphaMap': 'alphamap_fragment',\r\n\t'specularMap': 'specularmap_fragment',\r\n\t'map': 'map_fragment',\r\n\t'emissiveMap': 'emissivemap_fragment',\r\n\t'metalnessMap': 'metalnessmap_fragment',\r\n\t'roughnessMap': 'roughnessmap_fragment',\r\n\t'glossinessMap': 'metalnessmap_fragment', //this one cant be programatic because it belongs to another override, could be a specific check somewhere else\r\n\t'specularMapGloss': 'roughnessmap_fragment',\r\n};\r\n\r\n//some utils\r\n\r\nvar mapRegex = /texture2D\\( (.*Map|map), vUv \\)/gm //look for the pattern /texture2D( $someMap, vUv )/\r\n\r\n//because the other extension changes roughnessMap to specularMap we need the $1 to replace the name, otherwise it could be `mapName`\r\nfunction getReplaceString(mapName){\r\n\treturn `texture2D( $1, ( ${getUniformNameFromProp(mapName)} * vec3( vUv, 1. ) ).xy )`\r\n}\r\n\r\n//in order to keep the uniform name obvious that it belongs to the GLSL context, and to make it as private sounding as possible\r\nfunction getUniformNameFromProp(prop){\r\n\treturn `u_${prop}Transform`\r\n}\r\n\r\n//a utility to add the necessary transform properties to a material based on an arbitrary map name\r\n//so if specularMap is provided it will create these Vector2, a float, and an updateMatrix method\r\n//this is very similar to the Texture transform interface the only difference being that the props are prefixed\r\n//myTexture.repeat vs myMaterial.specularMapRepeat \r\nfunction addMapTransformPropsToMaterial( material, mapName ){\r\n\r\n\tlet _mapName = mapName\r\n\tmaterial[`${mapName}Repeat`] = new THREE.Vector2(1,1)\r\n\tmaterial[`${mapName}Offset`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Center`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Rotation`] = 0\r\n\tmaterial[`${mapName}UpdateMatrix`] = function(){\r\n\t\tthis.shaderUniforms[getUniformNameFromProp(_mapName)].value\r\n\t\t.setUvTransform(\r\n\t\t\tthis[`${_mapName}Offset`].x,\r\n\t\t\tthis[`${_mapName}Offset`].y, \r\n\t\t\tthis[`${_mapName}Repeat`].x,\r\n\t\t\tthis[`${_mapName}Repeat`].y, \r\n\t\t\tthis[`${_mapName}Rotation`], \r\n\t\t\tthis[`${_mapName}Center`].x,\r\n\t\t\tthis[`${_mapName}Center`].y, \r\n\t\t)\r\n\t}.bind(material)\r\n}\r\n\r\n\r\nexport default function decorateMaterialWithPerMapTransforms( material, mapList ) {\r\n\r\n\tif ( material.isPerMapTransformExtended ) return material;\r\n\r\n\tmaterial.isPerMapTransformExtended = true;\r\n\r\n\t//one can provide a subset from outside\r\n\tmapList = mapList || DEFAULT_MAP_LIST;\r\n\r\n\tvar shaderUniforms = {}\r\n\tvar shaderIncludes = {}\r\n\tvar serialize = []\r\n\r\n\tfor ( var i = 0; i < mapList.length; i ++ ) {\r\n\r\n\t\tvar mapName = mapList[ i ];\r\n\r\n\r\n\t\tif ( material[ mapName ] !== undefined ) {\r\n\r\n\t\t\taddMapTransformPropsToMaterial(material, mapName)\r\n\r\n\t\t\tvar uniform = { value: new THREE.Matrix3(), type:'mat3', stage: 'fragment' };\r\n\t\t\tuniform.value.setUvTransform = setUvTransform.bind( uniform.value );\r\n\r\n\t\t\tshaderUniforms[getUniformNameFromProp(mapName)] = uniform\r\n\r\n\t\t\t//this is for resolving the conflict, its not the most elegant solution but it works\r\n\t\t\t//i believe that this would be solved by refactoring the shader templates\r\n\t\t\tvar lookup = mapName\r\n\t\t\tif( material.isSpecGlossExtended && mapName === 'specularMap'){\r\n\t\t\t\tlookup = 'specularMapGloss' \r\n\t\t\t}\r\n\t\t\tserialize.push(mapName)\r\n\r\n\t\t\t//based on the map name ie. specularMap or even an extended glossinessMap pick a chunk\r\n\t\t\tvar chunkName = PROP_TO_CHUNK_MAP[lookup]\r\n\r\n\t\t\t//if there already is a chunk from some extension, pick that, otherwise copy the default chunk\r\n\t\t\tvar shaderChunk = (material.shaderIncludes && material.shaderIncludes[chunkName]) || THREE.ShaderChunk[chunkName]\r\n\r\n\t\t\t//apply the string transformation, this contains the copy of whatever chunk was provided (default or custom)\r\n\t\t\tshaderChunk = shaderChunk.replace( mapRegex , getReplaceString(mapName) )\r\n\r\n\t\t\t//provide this copy as the include chunk, this shader wont look up THREE.ShaderChunk \r\n\t\t\t//and doesnt have to wait for onBeforeCompile to do the transformation\r\n\t\t\t//final transformed chunk is already stored here in this context sync\r\n\t\t\tshaderIncludes[ chunkName ] = shaderChunk\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//combine with other chunks\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction(((data,meta)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isPerMapTransformExtended = true\r\n\r\n\t\tserialize.forEach(mapName=>{\r\n\t\t\tdata[`${mapName}Repeat`] = material[`${mapName}Repeat`].toArray()\r\n\t\t\tdata[`${mapName}Offset`] = material[`${mapName}Offset`].toArray()\r\n\t\t\tdata[`${mapName}Center`] = material[`${mapName}Center`].toArray()\r\n\t\t\tdata[`${mapName}Rotation`] = material[`${mapName}Rotation`]\r\n\t\t})\r\n\r\n\t\treturn data\r\n\r\n\t}).bind(material))\r\n\r\n\r\n\tmaterial._serializationManager.addAfterFunction(\r\n\t\tfunction( data ){\r\n\t\t\tdelete data.roughnessMap\r\n\t\t\tdelete data.roughness\r\n\t\t\tdelete data.metalnessMap\r\n\t\t\tdelete data.metalness\t\r\n\t\t}\r\n\t)\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n}\r\n\r\n// simple instance stuff from lambert example  ---------------------------------------------------------\r\n\r\n//this is a stage after begin_vertex, this would be more elegant with hooks and template refactor\r\nvar after_vertex_transform_chunk = `\r\n\ttransformed *= instanceScale; //the value present in transformed is in model space, \r\n\ttransformed = transformed + instanceOffset;\r\n`\r\n\r\nexport function decorateMaterialWithSimpleInstancing( material ) {\r\n\tconsole.log(\"shaderIncludes\");\r\n\tif( material.isSimpleInstanceExtended ) return material\r\n\r\n\tmaterial.isSimpleInstanceExtended = true \r\n\t\r\n\t//make a custom chunk that includes a copy of the default chunk from THREE.ShaderChunk\r\n\t//followed by a custom chunk, that is simply appended to the copy\r\n\tvar shaderIncludes = { \r\n\t\tbegin_vertex:`\r\n\t\t\t${THREE.ShaderChunk.begin_vertex}\r\n\t\t\t${after_vertex_transform_chunk}\r\n\t\t` \r\n\t}\r\n\r\n\tconsole.log(\"shaderIncludes\");\r\n\t//no good global chunk, but could be uv_pars, heres how to make it work with onbeforecompile\r\n\t//because this is somewhat of a set and forget thing, onBeforeCompile (or onBeforeParse) is \r\n\t//perfectly valid to use here\r\n\t//\"here are some attribute names, whenver you get around to assemblying the shader on WebGL level use them\"\r\n\t//A uniform (over an attribute) would be better if it were available in this scope\r\n\t\r\n\tvar attributeInjection = `\r\n\t\tattribute vec3 instanceOffset; \r\n\t\tattribute float instanceScale;\r\n\t`\r\n\r\n\tmaterial.onBeforeCompile = shader => {\r\n\t\tshader.vertexShader = `\r\n\t\t${attributeInjection}\r\n\t\t${shader.vertexShader}\r\n\t\t`\r\n\t}\r\n\r\n\t//alternatively one can use `uv_pars_vertex`\r\n\t//since displacement map is used in almost all of the shaders, this chunk is present \r\n\t//depth for example, has this chunk, so whatever attribute is added to StandardMaterial\r\n\t//is also going to be added to DepthMaterial\r\n\t/*shaderIncludes = {\r\n\t\tuv_pars_vertex: `\r\n\t\t${attributeInjection}\r\n\t\t${THREE.ShaderChunk.uv_pars_vertex}\r\n\t\t`\r\n\t}*/\r\n\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction((data)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSimpleInstanceExtended = true\r\n\t})\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n\r\nfunction SerializationManager(){\r\n\tthis.processFunctions = []\r\n\tthis.afterFunctions = []\r\n}\r\n\r\nSerializationManager.prototype = {\r\n\taddFunction: function( func ){\r\n\t\tthis.processFunctions.push(func)\r\n\t},\r\n\tserialize(data, meta){\r\n\t\tthis.processFunctions.forEach(f=>f(data))\r\n\t\treturn data\r\n\t},\r\n\tafterSerialize(data){\r\n\t\tthis.afterFunctions.forEach(f=>f(data))\r\n\t},\r\n\taddAfterFunction: function( func ){\r\n\t\tthis.afterFunctions.push(func)\r\n\t}\r\n}\r\n","// some utils\r\n\r\nimport * as THREE from \"three\";\r\n\r\nfunction addOrMergeProp( material, propName, data ) {\r\n\r\n\tif ( material[ propName ] ) {\r\n\r\n\t\tObject.assign( material[ propName ], data );\r\n\r\n\t} else {\r\n\r\n\t\tmaterial[ propName ] = data;\r\n\r\n\t}\r\n\r\n}\r\n\r\n//serialize\r\nfunction toJSON(){\r\n\tvar res = THREE.Material.prototype.toJSON.call(\r\n\t\tthis, \r\n\t\tundefined, \r\n\t\tthis._serializationManager.serialize.bind(this._serializationManager)\r\n\t)\r\n\tthis._serializationManager.afterSerialize.call(this._serializationManager,res)\r\n\treturn res\r\n}\r\n\r\n// from three's texture transform api, to be applied to a uniform matrix\r\nfunction setUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\tvar c = Math.cos( rotation );\r\n\tvar s = Math.sin( rotation );\r\n\r\n\tthis.set(\r\n\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t0, 0, 0\r\n\t);\r\n\r\n}\r\n\r\n//spec gloss stuff ---------------------------------------------------------\r\n\r\n//this extends the shader to use specular gloss PBR model instead of rough/metal\r\n\r\nvar specularMapFragmentChunk = [\r\n\t'vec3 specularFactor = specular;',\r\n\t'#ifdef USE_SPECULARMAP',\r\n\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t'#endif',\r\n\t// 'gl_FragColor = vec4(vec3(specularFactor),1.);',\r\n\t// 'return;',\r\n].join( '\\n' );\r\n\r\nvar glossinessMapFragmentChunk = [\r\n\t'float glossinessFactor = glossiness;',\r\n\t'#ifdef USE_GLOSSINESSMAP',\r\n\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t// 'gl_FragColor = vec4(vec3(glossinessFactor),1.);',\r\n\t// 'return;',\r\n\t'#endif',\r\n].join( '\\n' );\r\n\r\nvar lightPhysicalFragmentChunk = [\r\n\t'PhysicalMaterial material;',\r\n\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t'material.specularColor = specularFactor.rgb;',\r\n].join( '\\n' );\r\n\r\nvar SHADER_INCLUDES_SPEC_GLOSS = {\r\n\troughnessmap_fragment: specularMapFragmentChunk,\r\n\tmetalnessmap_fragment: glossinessMapFragmentChunk,\r\n\tlights_physical_fragment: lightPhysicalFragmentChunk,\r\n};\r\n\r\nexport default function decorateMaterialWithSpecGloss( material ) {\r\n\r\n\tif ( material.isSpecGlossExtended ) return material;\r\n\r\n\tmaterial.isSpecGlossExtended = true;\r\n\r\n\t// these are the extra uniforms, but instead of being stored in .userData, or some such place\r\n\t// a designated prop could be used\r\n\tvar shaderUniforms = {\r\n\t\tspecular: { value: new THREE.Color().setHex( 0xffffff ), type: 'vec3', stage: 'fragment' }, //fragment can be ommitted (defaults to it) but for sake of clarity\r\n\t\tglossiness: { value: 1, type: 'float', stage: 'fragment' },\r\n\t\tglossinessMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t\tspecularMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t};\r\n\r\n\tvar shaderIncludes = Object.assign({},SHADER_INCLUDES_SPEC_GLOSS)\r\n\r\n\tvar defines = {USE_GLOSSINESSMAP: ''}\r\n\r\n\t//conflicts could be resolved here\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\taddOrMergeProp( material, 'defines', defines );\r\n\r\n\tdelete material.metalnessMap\r\n\tdelete material.roughnessMap\r\n\r\n\t//expose uniforms as props for a cleaner interface (but shaderUniforms is also available so this can be omitted)\r\n\t//it just leads to a cleaner more familiar interface (PhongMaterial has specularMap, so this now has it too)\r\n\tfor ( let propName in shaderUniforms ) {\r\n\r\n\t\tObject.defineProperty( material, propName, {\r\n\t\t\tget: ()=> shaderUniforms[ propName ].value,\r\n\t\t\tset: ( v )=> (shaderUniforms[ propName ].value = v),\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\tvar f = function(data,meta){\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSpecGlossExtended = true\r\n\t\tdata.glossiness = this.glossiness\r\n\t\tdata.specular = this.specular.getHex()\r\n\t\tif(this.glossinessMap && this.glossinessMap.isTexture) data.glossinessMap = this.glossinessMap.toJSON( meta ).uuid \r\n\t}.bind(material)\r\n\r\n\tmaterial._serializationManager.addFunction(f)\r\n\t\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n// multi uv stuff ---------------------------------------------------------\r\n\r\n// this moves the transform from textures to the material, textures become just data\r\n\r\n//list of maps to be extended, these are easy\r\nvar DEFAULT_MAP_LIST = [\r\n\t'alphaMap',\r\n\t'specularMap',\r\n\t'map',\r\n\t'emissiveMap',\r\n\t'metalnessMap',\r\n\t'roughnessMap',\r\n\t'glossinessMap' //this one is from the other example, but if its there it should work, this can be solved to work together somehow\r\n];\r\n\r\n//this can be programatic\r\n//it tells the extension where to look for certain maps\r\n//these follow the /texture2D( $mapname, vUv )/ pattern\r\n//normal map is a bit more complex and would require a non programatic chunk \r\nvar PROP_TO_CHUNK_MAP = {\r\n\t'alphaMap': 'alphamap_fragment',\r\n\t'specularMap': 'specularmap_fragment',\r\n\t'map': 'map_fragment',\r\n\t'emissiveMap': 'emissivemap_fragment',\r\n\t'metalnessMap': 'metalnessmap_fragment',\r\n\t'roughnessMap': 'roughnessmap_fragment',\r\n\t'glossinessMap': 'metalnessmap_fragment', //this one cant be programatic because it belongs to another override, could be a specific check somewhere else\r\n\t'specularMapGloss': 'roughnessmap_fragment',\r\n};\r\n\r\n//some utils\r\n\r\nvar mapRegex = /texture2D\\( (.*Map|map), vUv \\)/gm //look for the pattern /texture2D( $someMap, vUv )/\r\n\r\n//because the other extension changes roughnessMap to specularMap we need the $1 to replace the name, otherwise it could be `mapName`\r\nfunction getReplaceString(mapName){\r\n\treturn `texture2D( $1, ( ${getUniformNameFromProp(mapName)} * vec3( vUv, 1. ) ).xy )`\r\n}\r\n\r\n//in order to keep the uniform name obvious that it belongs to the GLSL context, and to make it as private sounding as possible\r\nfunction getUniformNameFromProp(prop){\r\n\treturn `u_${prop}Transform`\r\n}\r\n\r\n//a utility to add the necessary transform properties to a material based on an arbitrary map name\r\n//so if specularMap is provided it will create these Vector2, a float, and an updateMatrix method\r\n//this is very similar to the Texture transform interface the only difference being that the props are prefixed\r\n//myTexture.repeat vs myMaterial.specularMapRepeat \r\nfunction addMapTransformPropsToMaterial( material, mapName ){\r\n\r\n\tlet _mapName = mapName\r\n\tmaterial[`${mapName}Repeat`] = new THREE.Vector2(1,1)\r\n\tmaterial[`${mapName}Offset`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Center`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Rotation`] = 0\r\n\tmaterial[`${mapName}UpdateMatrix`] = function(){\r\n\t\tthis.shaderUniforms[getUniformNameFromProp(_mapName)].value\r\n\t\t.setUvTransform(\r\n\t\t\tthis[`${_mapName}Offset`].x,\r\n\t\t\tthis[`${_mapName}Offset`].y, \r\n\t\t\tthis[`${_mapName}Repeat`].x,\r\n\t\t\tthis[`${_mapName}Repeat`].y, \r\n\t\t\tthis[`${_mapName}Rotation`], \r\n\t\t\tthis[`${_mapName}Center`].x,\r\n\t\t\tthis[`${_mapName}Center`].y, \r\n\t\t)\r\n\t}.bind(material)\r\n}\r\n\r\n\r\nexport function decorateMaterialWithPerMapTransforms( material, mapList ) {\r\n\tconsole.log(\"default\");\r\n\tif ( material.isPerMapTransformExtended ) return material;\r\n\r\n\tmaterial.isPerMapTransformExtended = true;\r\n\r\n\t//one can provide a subset from outside\r\n\tmapList = mapList || DEFAULT_MAP_LIST;\r\n\r\n\tvar shaderUniforms = {}\r\n\tvar shaderIncludes = {}\r\n\tvar serialize = []\r\n\r\n\tfor ( var i = 0; i < mapList.length; i ++ ) {\r\n\r\n\t\tvar mapName = mapList[ i ];\r\n\r\n\r\n\t\tif ( material[ mapName ] !== undefined ) {\r\n\r\n\t\t\taddMapTransformPropsToMaterial(material, mapName)\r\n\r\n\t\t\tvar uniform = { value: new THREE.Matrix3(), type:'mat3', stage: 'fragment' };\r\n\t\t\tuniform.value.setUvTransform = setUvTransform.bind( uniform.value );\r\n\r\n\t\t\tshaderUniforms[getUniformNameFromProp(mapName)] = uniform\r\n\r\n\t\t\t//this is for resolving the conflict, its not the most elegant solution but it works\r\n\t\t\t//i believe that this would be solved by refactoring the shader templates\r\n\t\t\tvar lookup = mapName\r\n\t\t\tif( material.isSpecGlossExtended && mapName === 'specularMap'){\r\n\t\t\t\tlookup = 'specularMapGloss' \r\n\t\t\t}\r\n\t\t\tserialize.push(mapName)\r\n\r\n\t\t\t//based on the map name ie. specularMap or even an extended glossinessMap pick a chunk\r\n\t\t\tvar chunkName = PROP_TO_CHUNK_MAP[lookup]\r\n\r\n\t\t\t//if there already is a chunk from some extension, pick that, otherwise copy the default chunk\r\n\t\t\tvar shaderChunk = (material.shaderIncludes && material.shaderIncludes[chunkName]) || THREE.ShaderChunk[chunkName]\r\n\r\n\t\t\t//apply the string transformation, this contains the copy of whatever chunk was provided (default or custom)\r\n\t\t\tshaderChunk = shaderChunk.replace( mapRegex , getReplaceString(mapName) )\r\n\r\n\t\t\t//provide this copy as the include chunk, this shader wont look up THREE.ShaderChunk \r\n\t\t\t//and doesnt have to wait for onBeforeCompile to do the transformation\r\n\t\t\t//final transformed chunk is already stored here in this context sync\r\n\t\t\tshaderIncludes[ chunkName ] = shaderChunk\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//combine with other chunks\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction(((data,meta)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isPerMapTransformExtended = true\r\n\r\n\t\tserialize.forEach(mapName=>{\r\n\t\t\tdata[`${mapName}Repeat`] = material[`${mapName}Repeat`].toArray()\r\n\t\t\tdata[`${mapName}Offset`] = material[`${mapName}Offset`].toArray()\r\n\t\t\tdata[`${mapName}Center`] = material[`${mapName}Center`].toArray()\r\n\t\t\tdata[`${mapName}Rotation`] = material[`${mapName}Rotation`]\r\n\t\t})\r\n\r\n\t\treturn data\r\n\r\n\t}).bind(material))\r\n\r\n\r\n\tmaterial._serializationManager.addAfterFunction(\r\n\t\tfunction( data ){\r\n\t\t\tdelete data.roughnessMap\r\n\t\t\tdelete data.roughness\r\n\t\t\tdelete data.metalnessMap\r\n\t\t\tdelete data.metalness\t\r\n\t\t}\r\n\t)\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n}\r\n\r\n// simple instance stuff from lambert example  ---------------------------------------------------------\r\n\r\n//this is a stage after begin_vertex, this would be more elegant with hooks and template refactor\r\nvar after_vertex_transform_chunk = `\r\n\ttransformed *= instanceScale; //the value present in transformed is in model space, \r\n\ttransformed = transformed + instanceOffset;\r\n`\r\n\r\nexport function decorateMaterialWithSimpleInstancing( material ) {\r\n\tconsole.log(\"shaderIncludes\");\r\n\tif( material.isSimpleInstanceExtended ) return material\r\n\r\n\tmaterial.isSimpleInstanceExtended = true \r\n\t\r\n\t//make a custom chunk that includes a copy of the default chunk from THREE.ShaderChunk\r\n\t//followed by a custom chunk, that is simply appended to the copy\r\n\tvar shaderIncludes = { \r\n\t\tbegin_vertex:`\r\n\t\t\t${THREE.ShaderChunk.begin_vertex}\r\n\t\t\t${after_vertex_transform_chunk}\r\n\t\t` \r\n\t}\r\n\r\n\tconsole.log(\"shaderIncludes\");\r\n\t//no good global chunk, but could be uv_pars, heres how to make it work with onbeforecompile\r\n\t//because this is somewhat of a set and forget thing, onBeforeCompile (or onBeforeParse) is \r\n\t//perfectly valid to use here\r\n\t//\"here are some attribute names, whenver you get around to assemblying the shader on WebGL level use them\"\r\n\t//A uniform (over an attribute) would be better if it were available in this scope\r\n\t\r\n\tvar attributeInjection = `\r\n\t\tattribute vec3 instanceOffset; \r\n\t\tattribute float instanceScale;\r\n\t`\r\n\r\n\tmaterial.onBeforeCompile = shader => {\r\n\t\tshader.vertexShader = `\r\n\t\t${attributeInjection}\r\n\t\t${shader.vertexShader}\r\n\t\t`\r\n\t}\r\n\r\n\t//alternatively one can use `uv_pars_vertex`\r\n\t//since displacement map is used in almost all of the shaders, this chunk is present \r\n\t//depth for example, has this chunk, so whatever attribute is added to StandardMaterial\r\n\t//is also going to be added to DepthMaterial\r\n\t/*shaderIncludes = {\r\n\t\tuv_pars_vertex: `\r\n\t\t${attributeInjection}\r\n\t\t${THREE.ShaderChunk.uv_pars_vertex}\r\n\t\t`\r\n\t}*/\r\n\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction((data)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSimpleInstanceExtended = true\r\n\t})\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n\r\nfunction SerializationManager(){\r\n\tthis.processFunctions = []\r\n\tthis.afterFunctions = []\r\n}\r\n\r\nSerializationManager.prototype = {\r\n\taddFunction: function( func ){\r\n\t\tthis.processFunctions.push(func)\r\n\t},\r\n\tserialize(data, meta){\r\n\t\tthis.processFunctions.forEach(f=>f(data))\r\n\t\treturn data\r\n\t},\r\n\tafterSerialize(data){\r\n\t\tthis.afterFunctions.forEach(f=>f(data))\r\n\t},\r\n\taddAfterFunction: function( func ){\r\n\t\tthis.afterFunctions.push(func)\r\n\t}\r\n}\r\n","// some utils\r\n\r\nimport * as THREE from \"three\";\r\n\r\nfunction addOrMergeProp( material, propName, data ) {\r\n\r\n\tif ( material[ propName ] ) {\r\n\r\n\t\tObject.assign( material[ propName ], data );\r\n\r\n\t} else {\r\n\r\n\t\tmaterial[ propName ] = data;\r\n\r\n\t}\r\n\r\n}\r\n\r\n//serialize\r\nfunction toJSON(){\r\n\tvar res = THREE.Material.prototype.toJSON.call(\r\n\t\tthis, \r\n\t\tundefined, \r\n\t\tthis._serializationManager.serialize.bind(this._serializationManager)\r\n\t)\r\n\tthis._serializationManager.afterSerialize.call(this._serializationManager,res)\r\n\treturn res\r\n}\r\n\r\n// from three's texture transform api, to be applied to a uniform matrix\r\nfunction setUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\tvar c = Math.cos( rotation );\r\n\tvar s = Math.sin( rotation );\r\n\r\n\tthis.set(\r\n\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t0, 0, 0\r\n\t);\r\n\r\n}\r\n\r\n//spec gloss stuff ---------------------------------------------------------\r\n\r\n//this extends the shader to use specular gloss PBR model instead of rough/metal\r\n\r\nvar specularMapFragmentChunk = [\r\n\t'vec3 specularFactor = specular;',\r\n\t'#ifdef USE_SPECULARMAP',\r\n\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t'#endif',\r\n\t// 'gl_FragColor = vec4(vec3(specularFactor),1.);',\r\n\t// 'return;',\r\n].join( '\\n' );\r\n\r\nvar glossinessMapFragmentChunk = [\r\n\t'float glossinessFactor = glossiness;',\r\n\t'#ifdef USE_GLOSSINESSMAP',\r\n\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t// 'gl_FragColor = vec4(vec3(glossinessFactor),1.);',\r\n\t// 'return;',\r\n\t'#endif',\r\n].join( '\\n' );\r\n\r\nvar lightPhysicalFragmentChunk = [\r\n\t'PhysicalMaterial material;',\r\n\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t'material.specularColor = specularFactor.rgb;',\r\n].join( '\\n' );\r\n\r\nvar SHADER_INCLUDES_SPEC_GLOSS = {\r\n\troughnessmap_fragment: specularMapFragmentChunk,\r\n\tmetalnessmap_fragment: glossinessMapFragmentChunk,\r\n\tlights_physical_fragment: lightPhysicalFragmentChunk,\r\n};\r\n\r\nexport function decorateMaterialWithSpecGloss( material ) {\r\n\r\n\tif ( material.isSpecGlossExtended ) return material;\r\n\r\n\tmaterial.isSpecGlossExtended = true;\r\n\r\n\t// these are the extra uniforms, but instead of being stored in .userData, or some such place\r\n\t// a designated prop could be used\r\n\tvar shaderUniforms = {\r\n\t\tspecular: { value: new THREE.Color().setHex( 0xffffff ), type: 'vec3', stage: 'fragment' }, //fragment can be ommitted (defaults to it) but for sake of clarity\r\n\t\tglossiness: { value: 1, type: 'float', stage: 'fragment' },\r\n\t\tglossinessMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t\tspecularMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t};\r\n\r\n\tvar shaderIncludes = Object.assign({},SHADER_INCLUDES_SPEC_GLOSS)\r\n\r\n\tvar defines = {USE_GLOSSINESSMAP: ''}\r\n\r\n\t//conflicts could be resolved here\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\taddOrMergeProp( material, 'defines', defines );\r\n\r\n\tdelete material.metalnessMap\r\n\tdelete material.roughnessMap\r\n\r\n\t//expose uniforms as props for a cleaner interface (but shaderUniforms is also available so this can be omitted)\r\n\t//it just leads to a cleaner more familiar interface (PhongMaterial has specularMap, so this now has it too)\r\n\tfor ( let propName in shaderUniforms ) {\r\n\r\n\t\tObject.defineProperty( material, propName, {\r\n\t\t\tget: ()=> shaderUniforms[ propName ].value,\r\n\t\t\tset: ( v )=> (shaderUniforms[ propName ].value = v),\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\tvar f = function(data,meta){\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSpecGlossExtended = true\r\n\t\tdata.glossiness = this.glossiness\r\n\t\tdata.specular = this.specular.getHex()\r\n\t\tif(this.glossinessMap && this.glossinessMap.isTexture) data.glossinessMap = this.glossinessMap.toJSON( meta ).uuid \r\n\t}.bind(material)\r\n\r\n\tmaterial._serializationManager.addFunction(f)\r\n\t\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n// multi uv stuff ---------------------------------------------------------\r\n\r\n// this moves the transform from textures to the material, textures become just data\r\n\r\n//list of maps to be extended, these are easy\r\nvar DEFAULT_MAP_LIST = [\r\n\t'alphaMap',\r\n\t'specularMap',\r\n\t'map',\r\n\t'emissiveMap',\r\n\t'metalnessMap',\r\n\t'roughnessMap',\r\n\t'glossinessMap' //this one is from the other example, but if its there it should work, this can be solved to work together somehow\r\n];\r\n\r\n//this can be programatic\r\n//it tells the extension where to look for certain maps\r\n//these follow the /texture2D( $mapname, vUv )/ pattern\r\n//normal map is a bit more complex and would require a non programatic chunk \r\nvar PROP_TO_CHUNK_MAP = {\r\n\t'alphaMap': 'alphamap_fragment',\r\n\t'specularMap': 'specularmap_fragment',\r\n\t'map': 'map_fragment',\r\n\t'emissiveMap': 'emissivemap_fragment',\r\n\t'metalnessMap': 'metalnessmap_fragment',\r\n\t'roughnessMap': 'roughnessmap_fragment',\r\n\t'glossinessMap': 'metalnessmap_fragment', //this one cant be programatic because it belongs to another override, could be a specific check somewhere else\r\n\t'specularMapGloss': 'roughnessmap_fragment',\r\n};\r\n\r\n//some utils\r\n\r\nvar mapRegex = /texture2D\\( (.*Map|map), vUv \\)/gm //look for the pattern /texture2D( $someMap, vUv )/\r\n\r\n//because the other extension changes roughnessMap to specularMap we need the $1 to replace the name, otherwise it could be `mapName`\r\nfunction getReplaceString(mapName){\r\n\treturn `texture2D( $1, ( ${getUniformNameFromProp(mapName)} * vec3( vUv, 1. ) ).xy )`\r\n}\r\n\r\n//in order to keep the uniform name obvious that it belongs to the GLSL context, and to make it as private sounding as possible\r\nfunction getUniformNameFromProp(prop){\r\n\treturn `u_${prop}Transform`\r\n}\r\n\r\n//a utility to add the necessary transform properties to a material based on an arbitrary map name\r\n//so if specularMap is provided it will create these Vector2, a float, and an updateMatrix method\r\n//this is very similar to the Texture transform interface the only difference being that the props are prefixed\r\n//myTexture.repeat vs myMaterial.specularMapRepeat \r\nfunction addMapTransformPropsToMaterial( material, mapName ){\r\n\r\n\tlet _mapName = mapName\r\n\tmaterial[`${mapName}Repeat`] = new THREE.Vector2(1,1)\r\n\tmaterial[`${mapName}Offset`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Center`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Rotation`] = 0\r\n\tmaterial[`${mapName}UpdateMatrix`] = function(){\r\n\t\tthis.shaderUniforms[getUniformNameFromProp(_mapName)].value\r\n\t\t.setUvTransform(\r\n\t\t\tthis[`${_mapName}Offset`].x,\r\n\t\t\tthis[`${_mapName}Offset`].y, \r\n\t\t\tthis[`${_mapName}Repeat`].x,\r\n\t\t\tthis[`${_mapName}Repeat`].y, \r\n\t\t\tthis[`${_mapName}Rotation`], \r\n\t\t\tthis[`${_mapName}Center`].x,\r\n\t\t\tthis[`${_mapName}Center`].y, \r\n\t\t)\r\n\t}.bind(material)\r\n}\r\n\r\n\r\nexport function decorateMaterialWithPerMapTransforms( material, mapList ) {\r\n\r\n\tif ( material.isPerMapTransformExtended ) return material;\r\n\r\n\tmaterial.isPerMapTransformExtended = true;\r\n\r\n\t//one can provide a subset from outside\r\n\tmapList = mapList || DEFAULT_MAP_LIST;\r\n\r\n\tvar shaderUniforms = {}\r\n\tvar shaderIncludes = {}\r\n\tvar serialize = []\r\n\r\n\tfor ( var i = 0; i < mapList.length; i ++ ) {\r\n\r\n\t\tvar mapName = mapList[ i ];\r\n\r\n\r\n\t\tif ( material[ mapName ] !== undefined ) {\r\n\r\n\t\t\taddMapTransformPropsToMaterial(material, mapName)\r\n\r\n\t\t\tvar uniform = { value: new THREE.Matrix3(), type:'mat3', stage: 'fragment' };\r\n\t\t\tuniform.value.setUvTransform = setUvTransform.bind( uniform.value );\r\n\r\n\t\t\tshaderUniforms[getUniformNameFromProp(mapName)] = uniform\r\n\r\n\t\t\t//this is for resolving the conflict, its not the most elegant solution but it works\r\n\t\t\t//i believe that this would be solved by refactoring the shader templates\r\n\t\t\tvar lookup = mapName\r\n\t\t\tif( material.isSpecGlossExtended && mapName === 'specularMap'){\r\n\t\t\t\tlookup = 'specularMapGloss' \r\n\t\t\t}\r\n\t\t\tserialize.push(mapName)\r\n\r\n\t\t\t//based on the map name ie. specularMap or even an extended glossinessMap pick a chunk\r\n\t\t\tvar chunkName = PROP_TO_CHUNK_MAP[lookup]\r\n\r\n\t\t\t//if there already is a chunk from some extension, pick that, otherwise copy the default chunk\r\n\t\t\tvar shaderChunk = (material.shaderIncludes && material.shaderIncludes[chunkName]) || THREE.ShaderChunk[chunkName]\r\n\r\n\t\t\t//apply the string transformation, this contains the copy of whatever chunk was provided (default or custom)\r\n\t\t\tshaderChunk = shaderChunk.replace( mapRegex , getReplaceString(mapName) )\r\n\r\n\t\t\t//provide this copy as the include chunk, this shader wont look up THREE.ShaderChunk \r\n\t\t\t//and doesnt have to wait for onBeforeCompile to do the transformation\r\n\t\t\t//final transformed chunk is already stored here in this context sync\r\n\t\t\tshaderIncludes[ chunkName ] = shaderChunk\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//combine with other chunks\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction(((data,meta)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isPerMapTransformExtended = true\r\n\r\n\t\tserialize.forEach(mapName=>{\r\n\t\t\tdata[`${mapName}Repeat`] = material[`${mapName}Repeat`].toArray()\r\n\t\t\tdata[`${mapName}Offset`] = material[`${mapName}Offset`].toArray()\r\n\t\t\tdata[`${mapName}Center`] = material[`${mapName}Center`].toArray()\r\n\t\t\tdata[`${mapName}Rotation`] = material[`${mapName}Rotation`]\r\n\t\t})\r\n\r\n\t\treturn data\r\n\r\n\t}).bind(material))\r\n\r\n\r\n\tmaterial._serializationManager.addAfterFunction(\r\n\t\tfunction( data ){\r\n\t\t\tdelete data.roughnessMap\r\n\t\t\tdelete data.roughness\r\n\t\t\tdelete data.metalnessMap\r\n\t\t\tdelete data.metalness\t\r\n\t\t}\r\n\t)\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n}\r\n\r\n// simple instance stuff from lambert example  ---------------------------------------------------------\r\n\r\n//this is a stage after begin_vertex, this would be more elegant with hooks and template refactor\r\nvar after_vertex_transform_chunk = `\r\n\ttransformed *= instanceScale; //the value present in transformed is in model space, \r\n\ttransformed = transformed + instanceOffset;\r\n`\r\n\r\nexport default function decorateMaterialWithSimpleInstancing( material ) {\r\n\r\n\tif( material.isSimpleInstanceExtended ) return material\r\n\r\n\tmaterial.isSimpleInstanceExtended = true \r\n\t\r\n\t//make a custom chunk that includes a copy of the default chunk from THREE.ShaderChunk\r\n\t//followed by a custom chunk, that is simply appended to the copy\r\n\r\n\tvar shaderIncludes = {\r\n\r\n\t\tbegin_vertex:`\r\n\t\t\t${THREE.ShaderChunk.begin_vertex}\r\n\t\t\t${after_vertex_transform_chunk}\r\n\t\t` \r\n\t}\r\n\r\n\t//no good global chunk, but could be uv_pars, heres how to make it work with onbeforecompile\r\n\t//because this is somewhat of a set and forget thing, onBeforeCompile (or onBeforeParse) is \r\n\t//perfectly valid to use here\r\n\t//\"here are some attribute names, whenver you get around to assemblying the shader on WebGL level use them\"\r\n\t//A uniform (over an attribute) would be better if it were available in this scope\r\n\t\r\n\tvar attributeInjection = `\r\n\t\tattribute vec3 instanceOffset; \r\n\t\tattribute float instanceScale;\r\n\t`\r\n\r\n\tmaterial.onBeforeCompile = shader => {\r\n\t\t// console.log(\"vv\",shader.vertexShader);\r\n\t\tshader.uniforms.uTime = material.userData.uTime;\r\n\t\tshader.vertexShader = `\r\n\t\tattribute vec3 instanceOffset;\r\n\t\t\tattribute float instanceScale;\r\n\t\t\t#include <common>\r\n\t\t\t#include <uv_pars_vertex>\r\n\t\t\tattribute float aIndex;\r\n\t\t\t#include <displacementmap_pars_vertex>\r\n\t\t\t#include <morphtarget_pars_vertex>\r\n\t\t\t#include <skinning_pars_vertex>\r\n\t\t\t#include <logdepthbuf_pars_vertex>\r\n\t\t\t#include <clipping_planes_pars_vertex>\r\n\t\t\tvarying vec2 vHighPrecisionZW;\r\n\t\t\tuniform float uTime;\r\n\t\t\tvoid main() {\r\n\t\t\t\t#include <uv_vertex>\r\n\t\t\t\t#include <skinbase_vertex>\r\n\t\t\t\t#ifdef USE_DISPLACEMENTMAP\r\n\t\t\t\t\t#include <beginnormal_vertex>\r\n\t\t\t\t\t#include <morphnormal_vertex>\r\n\t\t\t\t\t#include <skinnormal_vertex>\r\n\t\t\t\t#endif\r\n\t\t\t\t#include <begin_vertex>\r\n\t\t\t\t// instanced\r\n\t\t\t\tfloat _ind = aIndex + uTime;\r\n\t\t\t\ttransformed *= 1. + 0.5 * sin(24.0 * 3.14 * _ind );\r\n\t\t\t\ttransformed = transformed + instanceOffset;\r\n\t\t\t\t#include <morphtarget_vertex>\r\n\t\t\t\t#include <skinning_vertex>\r\n\t\t\t\t#include <displacementmap_vertex>\r\n\t\t\t\t#include <project_vertex>\r\n\t\t\t\t#include <logdepthbuf_vertex>\r\n\t\t\t\t#include <clipping_planes_vertex>\r\n\t\t\t\tvHighPrecisionZW = gl_Position.zw;\r\n\t\t\t}\r\n\t\t`\r\n\t}\r\n\r\n\t\t\t// ${attributeInjection}\r\n\t//alternatively one can use `uv_pars_vertex`\r\n\t//since displacement map is used in almost all of the shaders, this chunk is present \r\n\t//depth for example, has this chunk, so whatever attribute is added to StandardMaterial\r\n\t//is also going to be added to DepthMaterial\r\n\t// shaderIncludes = {\r\n\t// \tuv_pars_vertex: `\r\n\t// \t${attributeInjection}\r\n\t// \t${THREE.ShaderChunk.uv_pars_vertex}\r\n\t// \t`\r\n\t// }\r\n\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction((data)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSimpleInstanceExtended = true\r\n\t})\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\nfunction SerializationManager(){\r\n\tthis.processFunctions = []\r\n\tthis.afterFunctions = []\r\n}\r\n\r\nSerializationManager.prototype = {\r\n\taddFunction: function( func ){\r\n\t\tthis.processFunctions.push(func)\r\n\t},\r\n\tserialize(data, meta){\r\n\t\tthis.processFunctions.forEach(f=>f(data))\r\n\t\treturn data\r\n\t},\r\n\tafterSerialize(data){\r\n\t\tthis.afterFunctions.forEach(f=>f(data))\r\n\t},\r\n\taddAfterFunction: function( func ){\r\n\t\tthis.afterFunctions.push(func)\r\n\t}\r\n}\r\n","// some utils\r\n\r\nimport * as THREE from \"three\";\r\n\r\nfunction addOrMergeProp( material, propName, data ) {\r\n\r\n\tif ( material[ propName ] ) {\r\n\r\n\t\tObject.assign( material[ propName ], data );\r\n\r\n\t} else {\r\n\r\n\t\tmaterial[ propName ] = data;\r\n\r\n\t}\r\n\r\n}\r\n\r\n//serialize\r\nfunction toJSON(){\r\n\tvar res = THREE.Material.prototype.toJSON.call(\r\n\t\tthis, \r\n\t\tundefined, \r\n\t\tthis._serializationManager.serialize.bind(this._serializationManager)\r\n\t)\r\n\tthis._serializationManager.afterSerialize.call(this._serializationManager,res)\r\n\treturn res\r\n}\r\n\r\n// from three's texture transform api, to be applied to a uniform matrix\r\nfunction setUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n\tvar c = Math.cos( rotation );\r\n\tvar s = Math.sin( rotation );\r\n\r\n\tthis.set(\r\n\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n\t\t0, 0, 0\r\n\t);\r\n\r\n}\r\n\r\n//spec gloss stuff ---------------------------------------------------------\r\n\r\n//this extends the shader to use specular gloss PBR model instead of rough/metal\r\n\r\nvar specularMapFragmentChunk = [\r\n\t'vec3 specularFactor = specular;',\r\n\t'#ifdef USE_SPECULARMAP',\r\n\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t'#endif',\r\n\t// 'gl_FragColor = vec4(vec3(specularFactor),1.);',\r\n\t// 'return;',\r\n].join( '\\n' );\r\n\r\nvar glossinessMapFragmentChunk = [\r\n\t'float glossinessFactor = glossiness;',\r\n\t'#ifdef USE_GLOSSINESSMAP',\r\n\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t// 'gl_FragColor = vec4(vec3(glossinessFactor),1.);',\r\n\t// 'return;',\r\n\t'#endif',\r\n].join( '\\n' );\r\n\r\nvar lightPhysicalFragmentChunk = [\r\n\t'PhysicalMaterial material;',\r\n\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t'material.specularColor = specularFactor.rgb;',\r\n].join( '\\n' );\r\n\r\nvar SHADER_INCLUDES_SPEC_GLOSS = {\r\n\troughnessmap_fragment: specularMapFragmentChunk,\r\n\tmetalnessmap_fragment: glossinessMapFragmentChunk,\r\n\tlights_physical_fragment: lightPhysicalFragmentChunk,\r\n};\r\n\r\nexport function decorateMaterialWithSpecGloss( material ) {\r\n\r\n\tif ( material.isSpecGlossExtended ) return material;\r\n\r\n\tmaterial.isSpecGlossExtended = true;\r\n\r\n\t// these are the extra uniforms, but instead of being stored in .userData, or some such place\r\n\t// a designated prop could be used\r\n\tvar shaderUniforms = {\r\n\t\tspecular: { value: new THREE.Color().setHex( 0xffffff ), type: 'vec3', stage: 'fragment' }, //fragment can be ommitted (defaults to it) but for sake of clarity\r\n\t\tglossiness: { value: 1, type: 'float', stage: 'fragment' },\r\n\t\tglossinessMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t\tspecularMap: { value: null, type: 'sampler2D', stage: 'fragment' },\r\n\t};\r\n\r\n\tvar shaderIncludes = Object.assign({},SHADER_INCLUDES_SPEC_GLOSS)\r\n\r\n\tvar defines = {USE_GLOSSINESSMAP: ''}\r\n\r\n\t//conflicts could be resolved here\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\taddOrMergeProp( material, 'defines', defines );\r\n\r\n\tdelete material.metalnessMap\r\n\tdelete material.roughnessMap\r\n\r\n\t//expose uniforms as props for a cleaner interface (but shaderUniforms is also available so this can be omitted)\r\n\t//it just leads to a cleaner more familiar interface (PhongMaterial has specularMap, so this now has it too)\r\n\tfor ( let propName in shaderUniforms ) {\r\n\r\n\t\tObject.defineProperty( material, propName, {\r\n\t\t\tget: ()=> shaderUniforms[ propName ].value,\r\n\t\t\tset: ( v )=> (shaderUniforms[ propName ].value = v),\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\tvar f = function(data,meta){\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSpecGlossExtended = true\r\n\t\tdata.glossiness = this.glossiness\r\n\t\tdata.specular = this.specular.getHex()\r\n\t\tif(this.glossinessMap && this.glossinessMap.isTexture) data.glossinessMap = this.glossinessMap.toJSON( meta ).uuid \r\n\t}.bind(material)\r\n\r\n\tmaterial._serializationManager.addFunction(f)\r\n\t\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n// multi uv stuff ---------------------------------------------------------\r\n\r\n// this moves the transform from textures to the material, textures become just data\r\n\r\n//list of maps to be extended, these are easy\r\nvar DEFAULT_MAP_LIST = [\r\n\t'alphaMap',\r\n\t'specularMap',\r\n\t'map',\r\n\t'emissiveMap',\r\n\t'metalnessMap',\r\n\t'roughnessMap',\r\n\t'glossinessMap' //this one is from the other example, but if its there it should work, this can be solved to work together somehow\r\n];\r\n\r\n//this can be programatic\r\n//it tells the extension where to look for certain maps\r\n//these follow the /texture2D( $mapname, vUv )/ pattern\r\n//normal map is a bit more complex and would require a non programatic chunk \r\nvar PROP_TO_CHUNK_MAP = {\r\n\t'alphaMap': 'alphamap_fragment',\r\n\t'specularMap': 'specularmap_fragment',\r\n\t'map': 'map_fragment',\r\n\t'emissiveMap': 'emissivemap_fragment',\r\n\t'metalnessMap': 'metalnessmap_fragment',\r\n\t'roughnessMap': 'roughnessmap_fragment',\r\n\t'glossinessMap': 'metalnessmap_fragment', //this one cant be programatic because it belongs to another override, could be a specific check somewhere else\r\n\t'specularMapGloss': 'roughnessmap_fragment',\r\n};\r\n\r\n//some utils\r\n\r\nvar mapRegex = /texture2D\\( (.*Map|map), vUv \\)/gm //look for the pattern /texture2D( $someMap, vUv )/\r\n\r\n//because the other extension changes roughnessMap to specularMap we need the $1 to replace the name, otherwise it could be `mapName`\r\nfunction getReplaceString(mapName){\r\n\treturn `texture2D( $1, ( ${getUniformNameFromProp(mapName)} * vec3( vUv, 1. ) ).xy )`\r\n}\r\n\r\n//in order to keep the uniform name obvious that it belongs to the GLSL context, and to make it as private sounding as possible\r\nfunction getUniformNameFromProp(prop){\r\n\treturn `u_${prop}Transform`\r\n}\r\n\r\n//a utility to add the necessary transform properties to a material based on an arbitrary map name\r\n//so if specularMap is provided it will create these Vector2, a float, and an updateMatrix method\r\n//this is very similar to the Texture transform interface the only difference being that the props are prefixed\r\n//myTexture.repeat vs myMaterial.specularMapRepeat \r\nfunction addMapTransformPropsToMaterial( material, mapName ){\r\n\r\n\tlet _mapName = mapName\r\n\tmaterial[`${mapName}Repeat`] = new THREE.Vector2(1,1)\r\n\tmaterial[`${mapName}Offset`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Center`] = new THREE.Vector2()\r\n\tmaterial[`${mapName}Rotation`] = 0\r\n\tmaterial[`${mapName}UpdateMatrix`] = function(){\r\n\t\tthis.shaderUniforms[getUniformNameFromProp(_mapName)].value\r\n\t\t.setUvTransform(\r\n\t\t\tthis[`${_mapName}Offset`].x,\r\n\t\t\tthis[`${_mapName}Offset`].y, \r\n\t\t\tthis[`${_mapName}Repeat`].x,\r\n\t\t\tthis[`${_mapName}Repeat`].y, \r\n\t\t\tthis[`${_mapName}Rotation`], \r\n\t\t\tthis[`${_mapName}Center`].x,\r\n\t\t\tthis[`${_mapName}Center`].y, \r\n\t\t)\r\n\t}.bind(material)\r\n}\r\n\r\n\r\nexport function decorateMaterialWithPerMapTransforms( material, mapList ) {\r\n\r\n\tif ( material.isPerMapTransformExtended ) return material;\r\n\r\n\tmaterial.isPerMapTransformExtended = true;\r\n\r\n\t//one can provide a subset from outside\r\n\tmapList = mapList || DEFAULT_MAP_LIST;\r\n\r\n\tvar shaderUniforms = {}\r\n\tvar shaderIncludes = {}\r\n\tvar serialize = []\r\n\r\n\tfor ( var i = 0; i < mapList.length; i ++ ) {\r\n\r\n\t\tvar mapName = mapList[ i ];\r\n\r\n\r\n\t\tif ( material[ mapName ] !== undefined ) {\r\n\r\n\t\t\taddMapTransformPropsToMaterial(material, mapName)\r\n\r\n\t\t\tvar uniform = { value: new THREE.Matrix3(), type:'mat3', stage: 'fragment' };\r\n\t\t\tuniform.value.setUvTransform = setUvTransform.bind( uniform.value );\r\n\r\n\t\t\tshaderUniforms[getUniformNameFromProp(mapName)] = uniform\r\n\r\n\t\t\t//this is for resolving the conflict, its not the most elegant solution but it works\r\n\t\t\t//i believe that this would be solved by refactoring the shader templates\r\n\t\t\tvar lookup = mapName\r\n\t\t\tif( material.isSpecGlossExtended && mapName === 'specularMap'){\r\n\t\t\t\tlookup = 'specularMapGloss' \r\n\t\t\t}\r\n\t\t\tserialize.push(mapName)\r\n\r\n\t\t\t//based on the map name ie. specularMap or even an extended glossinessMap pick a chunk\r\n\t\t\tvar chunkName = PROP_TO_CHUNK_MAP[lookup]\r\n\r\n\t\t\t//if there already is a chunk from some extension, pick that, otherwise copy the default chunk\r\n\t\t\tvar shaderChunk = (material.shaderIncludes && material.shaderIncludes[chunkName]) || THREE.ShaderChunk[chunkName]\r\n\r\n\t\t\t//apply the string transformation, this contains the copy of whatever chunk was provided (default or custom)\r\n\t\t\tshaderChunk = shaderChunk.replace( mapRegex , getReplaceString(mapName) )\r\n\r\n\t\t\t//provide this copy as the include chunk, this shader wont look up THREE.ShaderChunk \r\n\t\t\t//and doesnt have to wait for onBeforeCompile to do the transformation\r\n\t\t\t//final transformed chunk is already stored here in this context sync\r\n\t\t\tshaderIncludes[ chunkName ] = shaderChunk\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//combine with other chunks\r\n\taddOrMergeProp( material, 'shaderUniforms', shaderUniforms );\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction(((data,meta)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isPerMapTransformExtended = true\r\n\r\n\t\tserialize.forEach(mapName=>{\r\n\t\t\tdata[`${mapName}Repeat`] = material[`${mapName}Repeat`].toArray()\r\n\t\t\tdata[`${mapName}Offset`] = material[`${mapName}Offset`].toArray()\r\n\t\t\tdata[`${mapName}Center`] = material[`${mapName}Center`].toArray()\r\n\t\t\tdata[`${mapName}Rotation`] = material[`${mapName}Rotation`]\r\n\t\t})\r\n\r\n\t\treturn data\r\n\r\n\t}).bind(material))\r\n\r\n\r\n\tmaterial._serializationManager.addAfterFunction(\r\n\t\tfunction( data ){\r\n\t\t\tdelete data.roughnessMap\r\n\t\t\tdelete data.roughness\r\n\t\t\tdelete data.metalnessMap\r\n\t\t\tdelete data.metalness\t\r\n\t\t}\r\n\t)\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n}\r\n\r\n// simple instance stuff from lambert example  ---------------------------------------------------------\r\n\r\n//this is a stage after begin_vertex, this would be more elegant with hooks and template refactor\r\nvar after_vertex_transform_chunk = `\r\n\ttransformed *= instanceScale; //the value present in transformed is in model space, \r\n\ttransformed = transformed + instanceOffset;\r\n`\r\n\r\nexport default function decorateMaterialWithSimpleInstancing2( material ) {\r\n\r\n\tif( material.isSimpleInstanceExtended ) return material\r\n\r\n\tmaterial.isSimpleInstanceExtended = true \r\n\t\r\n\t//make a custom chunk that includes a copy of the default chunk from THREE.ShaderChunk\r\n\t//followed by a custom chunk, that is simply appended to the copy\r\n\r\n\tvar shaderIncludes = {\r\n\r\n\t\tbegin_vertex:`\r\n\t\t\t${THREE.ShaderChunk.begin_vertex}\r\n\t\t\t${after_vertex_transform_chunk}\r\n\t\t` \r\n\t}\r\n\r\n\t//no good global chunk, but could be uv_pars, heres how to make it work with onbeforecompile\r\n\t//because this is somewhat of a set and forget thing, onBeforeCompile (or onBeforeParse) is \r\n\t//perfectly valid to use here\r\n\t//\"here are some attribute names, whenver you get around to assemblying the shader on WebGL level use them\"\r\n\t//A uniform (over an attribute) would be better if it were available in this scope\r\n\t\r\n\tvar attributeInjection = `\r\n\t\tattribute vec3 instanceOffset; \r\n\t\tattribute float instanceScale;\r\n\t`\r\n\r\n\tmaterial.onBeforeCompile = shader => {\r\n\t\t// console.log(material.userData.uScale);\r\n\t\tshader.uniforms.uTime = material.userData.uTime;\r\n\t\tshader.uniforms.uScale = material.userData.uScale;\r\n\t\tshader.vertexShader = `\r\n\t\tattribute vec3 instanceOffset;\r\n\t\t\tattribute float instanceScale;\r\n\r\n\t\t#define STANDARD\r\nvarying vec3 vViewPosition;\r\n#ifndef FLAT_SHADED\r\n\tvarying vec3 vNormal;\r\n\t#ifdef USE_TANGENT\r\n\t\tvarying vec3 vTangent;\r\n\t\tvarying vec3 vBitangent;\r\n\t#endif\r\n#endif\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n// instanced\r\nattribute float aIndex;\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\nuniform float uTime;\r\nuniform float uScale;\r\nvoid main() {\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n#ifndef FLAT_SHADED\r\n\tvNormal = normalize( transformedNormal );\r\n\t#ifdef USE_TANGENT\r\n\t\tvTangent = normalize( transformedTangent );\r\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\r\n\t#endif\r\n#endif\r\n\t#include <begin_vertex>\r\n\r\n\t// instanced\r\n\t\t\t\tfloat _ind = aIndex + uTime;\r\n\t\t\ttransformed *= uScale + .5 * sin(24.0 * 3.14 * _ind )+ cos(2. * 3.14 * _ind );\r\n\t\t\t//transformed *= instanceScale;\r\n\t\t\t\ttransformed = transformed + instanceOffset;\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\tvViewPosition = - mvPosition.xyz;\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n}\r\n\t\t`\r\n\t}\r\n\r\n\t\t\t// ${attributeInjection}\r\n\t//alternatively one can use `uv_pars_vertex`\r\n\t//since displacement map is used in almost all of the shaders, this chunk is present \r\n\t//depth for example, has this chunk, so whatever attribute is added to StandardMaterial\r\n\t//is also going to be added to DepthMaterial\r\n\t// shaderIncludes = {\r\n\t// \tuv_pars_vertex: `\r\n\t// \t${attributeInjection}\r\n\t// \t${THREE.ShaderChunk.uv_pars_vertex}\r\n\t// \t`\r\n\t// }\r\n\r\n\taddOrMergeProp( material, 'shaderIncludes', shaderIncludes );\r\n\r\n\tif(!material._serializationManager) material._serializationManager = new SerializationManager()\r\n\r\n\tmaterial._serializationManager.addFunction((data)=>{\r\n\t\tif( !data.metadata.extensions ) data.metadata.extensions = {}\r\n\t\tdata.metadata.extensions.isSimpleInstanceExtended = true\r\n\t})\r\n\t\r\n\tmaterial.toJSON = toJSON.bind(material)\r\n\r\n\treturn material\r\n\r\n}\r\n\r\n\r\nfunction SerializationManager(){\r\n\tthis.processFunctions = []\r\n\tthis.afterFunctions = []\r\n}\r\n\r\nSerializationManager.prototype = {\r\n\taddFunction: function( func ){\r\n\t\tthis.processFunctions.push(func)\r\n\t},\r\n\tserialize(data, meta){\r\n\t\tthis.processFunctions.forEach(f=>f(data))\r\n\t\treturn data\r\n\t},\r\n\tafterSerialize(data){\r\n\t\tthis.afterFunctions.forEach(f=>f(data))\r\n\t},\r\n\taddAfterFunction: function( func ){\r\n\t\tthis.afterFunctions.push(func)\r\n\t}\r\n}\r\n","import React from 'react'\nimport jsonp from 'jsonp'\n\nexport const Status = {\n\tidle: 'IDLE',\n\tloading: 'LOADING',\n\tsuccess: 'SUCCESS',\t\n\terror: 'ERROR'\n}\n\nfunction toQueryString(params) {\n  return Object.keys(params)\n    .map((key) => key + \"=\" + params[key])\n    .join(\"&\");\n}\n\nexport default function useMailChimp(url) {\n\n  const [status, setStatus] = React.useState(Status.idle);\n  const [error, setError] = React.useState(null);\n  const [value, setValue] = React.useState(null);\n  const subscribe = React.useCallback((data) => {\n    const params = toQueryString(data);\n    const ajaxURL = url.replace(\"/post?\", \"/post-json?\");\n    const newUrl = ajaxURL + \"&\" + params;\n\n    setError(null);\n    setStatus(Status.loading);\n\n    jsonp(newUrl, { param: \"c\" }, (err, data) => {\n      console.log(err);\n      console.log(data.msg);\n      if (err) {\n        setStatus(Status.error);\n        setError(err);\n      } else if (data.result !== \"success\") {\n        setStatus(Status.error);\n        setError(data.msg);\n      } else {\n        setStatus(Status.success);\n        setValue(data.msg);\n      }\n    });\n  });\n\n  return { subscribe, status, error, value };\n}","import React from 'react'\n\nclass Loading extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n\n    \n}\n\nexport default Loading","import React from 'react';\nimport { ScreenWidth } from './ScreenWidth';\n\n\nclass Error extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tvar defaultErrorMsg = \"none\"\n\t\tvar noatErrorMsg = \"none\"\n\t\tvar alreadyErrorMsg = \"none\"\n\t\tvar domainErrorMsg = \"none\"\n\t\tvar emptyErrorMsg = \"none\"\n\t\tconsole.log(this.props.name);\n\t\tif (this.props.name == \"default\"){\n\n\t\t\tdefaultErrorMsg = \"inherit\"\n\t\t}else if(this.props.name == \"already\"){\n\t\t\talreadyErrorMsg = \"inherit\"\n\t\t}else if(this.props.name == \"noat\"){\n\t\t\tnoatErrorMsg = \"inherit\"\n\t\t}else if(this.props.name == \"domain\"){\n\t\t\tdomainErrorMsg = \"inherit\"\n\t\t}else if(this.props.name == \"empty\"){\n\t\t\temptyErrorMsg = \"inherit\"\n\t\t}else{\n\t\t\tdefaultErrorMsg = \"inherit\"\n\t\t}\n\t\tthis.state = {\n\t      display:\"inherit\",\n\t      displayForm:\"none\",\n\t      defaultErrorMsg: defaultErrorMsg,\n\t      noatErrorMsg: noatErrorMsg,\n\t      alreadyErrorMsg: alreadyErrorMsg,\n\t      domainErrorMsg: domainErrorMsg,\n\t      emptyErrorMsg:emptyErrorMsg\n\t    };\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\thandleSubmit(e){\n\t    this.setState({display:\"none\",\n\t      displayForm:\"inherit\"})\n\t    this.props.onClickk();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\n\n      \t\t<div className=\"error\" style={{display:this.state.display}}>\n      \t\t\t<div className=\"errorMsg\" style={{display:this.state.defaultErrorMsg}}>\n      \t\t\t<span className=\"errorTitle\">Error!</span><br /><br />\n      \t\t\t .<br />\n      \t\t\t .<br />\n      \t\t\t<button className=\"inputButton\" onClick={this.handleSubmit}>ok</button>\n      \t\t\t</div>\n      \t\t\t<div className=\"errorMsg\" style={{display:this.state.noatErrorMsg}}>\n      \t\t\t<span className=\"errorTitle\">Error!</span><br /><br />\n      \t\t\t   .<br />\n      \t\t\t .<br />\n      \t\t\t<button className=\"inputButton\" onClick={this.handleSubmit}>ok</button>\n      \t\t\t</div>\n      \t\t\t<div className=\"errorMsg\" style={{display:this.state.alreadyErrorMsg}}>\n      \t\t\t<span className=\"errorTitle\">Error!</span><br /><br />\n      \t\t\t  .<br />\n      \t\t\t<button className=\"inputButton\" onClick={this.handleSubmit}>ok</button>\n      \t\t\t</div>\n      \t\t\t<div className=\"errorMsg\" style={{display:this.state.domainErrorMsg}}>\n      \t\t\t<span className=\"errorTitle\">Error!</span><br /><br />\n      \t\t\t   .<br />\n      \t\t\t .<br />\n      \t\t\t<button className=\"inputButton\" onClick={this.handleSubmit}>ok</button>\n      \t\t\t</div>\n      \t\t\t<div className=\"errorMsg\" style={{display:this.state.emptyErrorMsg}}>\n      \t\t\t<span className=\"errorTitle\">Error!</span><br /><br />\n      \t\t\t    .<br />\n      \t\t\t<button className=\"inputButton\" onClick={this.handleSubmit}>ok</button>\n      \t\t\t</div>\n\t\t\t\t\n\n\t\t\t</div>\n      </div>\n\t\t);\n\t}\n\n    \n}\n\nexport default Error","import React from 'react'\nimport { ScreenWidth } from './ScreenWidth';\n\n\nclass Success extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\n\t\tthis.state = {\n\t      display:\"inherit\",\n\t      displayForm:\"none\"\n\t    };\n\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\thandleSubmit(e){\n\t    this.setState({display:\"none\",\n\t      displayForm:\"inherit\"});\n\t    this.props.onClickk();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\n\t\t\t<div className=\"error\" style={{display:this.state.display}}>\n      \t\t\t<div className=\"errorMsg\" >\n      \t\t\t<span className=\"errorTitle\">Success</span><br /><br />\n      \t\t\t  .<br />\n      \t\t\t  .<br />\n      \t\t\t<button className=\"inputButton\" onClick={this.handleSubmit}>ok</button>\n      \t\t\t</div>\n      \t\t\t</div>\n      \t\t\t</div>\n\t\t);\n\t}\n\n    \n}\n\nexport default Success","import { FunctionComponent } from 'react';\nimport { useScreenWidth } from './useScreenWidth';\n\n// type ScreenWidthChildren = (screenWidth) => any;\ntype ScreenWidthChildren = {\n  screenWidth: any,\n  mom: any,\n  son:any\n}\n\ninterface IScreenWidthProps {\n  children: ScreenWidthChildren;\n}\n\nexport const ScreenWidth: FunctionComponent<IScreenWidthProps> = ({\n  children,mom,son\n}) => {\n  const screenWidth = useScreenWidth(mom,son);\n  // console.log(\"hi test\", mom);\n  return children(screenWidth);\n};","import React from 'react';\nimport useMailchimp from './Hooks'\nimport Status from './Hooks'\nimport jsonp from 'jsonp'\n\nimport Loading from './Loading';\nimport Error from './Error';\nimport Success from './Success';\n\nexport function useScreenWidth(thingy,thingy2) {\n  // const SubscribeForm = () => {\n    // console.log(thingy);\n  const [form, setForm] = React.useState({firstName: '', email: ''})\n  const [status2, setStatus2] = React.useState(null);\n  var {subscribe, status, error, value} = useMailchimp('https://gmail.us7.list-manage.com/subscribe/post?u=7247676ecb0306e26c5320a78&amp;id=2a8a1ad9a4')\n\n  const handleInputChange = event => {\n    const target = event.target\n    const name = target.name\n    const value = target.value\n    setForm(form => ({\n      ...form,\n      [name]: value,\n    }))\n  }\n  const sendThisToParent = () =>{\n    // console.log(\"hey\", thingy);\n    thingy();\n    thingy2();\n    setStatus2(\"IDLE\");\n  }\n\n\n  const statusChange = () =>{\n    // status = \"IDLE\"\n    thingy2();\n    setStatus2(\"IDLE\");\n  }\n\n  const handleSubmit = () => {\n    // We are performing some simple validation here.\n    // I highly recommend checking a fully-fledged solution\n    // for forms like https://react-hook-form.com/\n    thingy2();\n    setStatus2(null);\n    if (form.email === '') {\n    \t// console.log(\"empty\");\n    \treturn}\n\n    subscribe({\n      FNAME: \"noname\",\n      EMAIL: form.email,\n    })\n  }\n\n  const afterSubmission = event => {\n    event.preventDefault();\n\t}\n\n// if (status === \"LOADING\") {\n//     return <Loading />\n//   }\n    if (status2 === \"IDLE\") {\n    \n  }else if(status === \"LOADING\") {\n    return <Loading />\n  }\n  else if (status === \"ERROR\") {\n  \tif (error != undefined) {\n  \t\tif (error.includes('An email address must contain')) {\n  \t\treturn <Error name=\"noat\" onClickk={statusChange} />\n\n\t  }else if (error.includes('The domain portion of the email address is invalid')) {\n  \t\treturn <Error name=\"domain\" onClickk={statusChange} />\n\t    \n\t  }else if (error.includes('already subscribed')) {\n  \t  \treturn <Error name=\"already\" onClickk={statusChange} />\n\t  }else{\n\t  \treturn <Error name=\"default\" onClickk={statusChange} />\n\t  }\n  \t}else{\n  \t\t\n  \t}\n  }else if (status === \"SUCCESS\") {\n  \treturn <Success onClickk={sendThisToParent} />\n  }\n\n\n  return (\n  \t<div>\n    <form className=\"form\" style={{display:\"inherit\"}} onSubmit = {afterSubmission} autocomplete=\"off\" >\n      <input\n        id=\"firstName\"\n        name=\"firstName\"\n        placeholder=\"name\"\n        onChange={handleInputChange}\n        className=\"input\"\n        style={{display:\"none\"}}\n      />\n      <br />\n      <input className=\"input\" id=\"email\" name=\"email\" placeholder=\"email\" onChange={handleInputChange} />\n      <br /> \n      <button className=\"inputButton\" onClick={handleSubmit}>Register </button>\n    </form>\n    </div>\n  )\n// }\n\n}\n\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { DDSLoader } from 'three/examples/jsm/loaders/DDSLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { Curves } from 'three/examples/jsm/curves/CurveExtras.js';\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module.js';\nimport { SubdivisionModifier } from 'three/examples/jsm/modifiers/SubdivisionModifier.js';\nimport { Detector } from 'three/examples/jsm/WebGL.js';\nimport decorateMaterialWithPerMapTransforms from '../js/SpecGlossMultiUVInstanceExample.js';\nimport decorateMaterialWithSpecGloss from '../js/SpecGlossMultiUVInstanceExample3.js';\nimport decorateMaterialWithSimpleInstancing from '../js/SpecGlossMultiUVInstanceExample2.js';\nimport decorateMaterialWithSimpleInstancing2 from '../js/SpecGlossMultiUVInstanceExample4.js';\nimport { NURBSCurve } from 'three/examples/jsm/curves/NURBSCurve.js';\nimport { Interaction } from 'three.interaction';\nimport { ScreenWidth } from './ScreenWidth';\n\nimport * as Nodes from 'three/examples/jsm/nodes/Nodes.js';\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\n\nimport {\n  isBrowser,\n  isMobile,\n  withOrientationChange\n} from \"react-device-detect\";\n\n\nvar INSTANCES = 128;\nvar frequency = 32;\nvar gltfScale = 1500;\nvar firstTime = true;\n\nconst style = {\n  // height: 5400 // we can control scene size by setting container dimensions\n};\n\nconst projectTitles =[\"spermtank\",\"naheerun\",\"ospapax\",\"oogenesis\",\"what\",\"cybersecurity\",\"naheerun\"];\nconst projectTitles2 =[\"would u b my sperm tank?\",\".  .\",\"ospapax\",\"oo-genesis\",\"what is daddy residency?\",\"cybersecurity4uterus\",\".  .\"];\nconst projectLinks =\n[\"https://www.youtube.com/embed/IDKXWiDn3ZU\",\n\"https://www.youtube.com/embed/3aWj_jF-htA\",\n\"https://www.youtube.com/embed/L2EGFM_asxo\",\n\"https://www.youtube.com/embed/IJ23D1M_Hp8\",\n\"https://www.youtube.com/embed/efzO_lpcyY4\",\n\"https://www.youtube.com/embed/-d-agXX5Z1I\",\n\"https://www.youtube.com/embed/3aWj_jF-htA\"];\n\nvar container, stats;\nvar camera, scene, renderer;\nvar tableShow = false;\nvar creditShow = false;\nvar marqueeHovered = false;\nvar marqueeHovered2 = false;\nvar focusCounter = 0;\nvar randDic = [\"\",\"\",\"\",\"+\",\"*\",\"\"];\nvar randDic2 = [\"\",\"\",\"\",\"\",\"\",\"\"];\nvar arrowSymbols = \"\";\n// var mobOrDesk = false;\n\nclass PlacentaNoClass extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tvar wWidth = window.innerWidth + \"px\";\n\t\tvar wHeight = window.innerHeight + \"px\";\n\t\tvar tableHeight = window.innerHeight - 150;\n\t\tconsole.log(tableHeight+\"px\");\n\t\tvar marqueeDisplay = \"none\";\n\t\tif (window.innerWidth>1200){\n\t\t\tmarqueeDisplay = \"inherit\"\n\t\t}\n\t\tvar marqueeFontSize = \"\";\n\t\t\n\t\tvar modalTop = \"0px\";\n\t    var modalLeft = \"0px\";\n\t    var petitDisplay =\"none\";\n\t    var titleWidth = wHeight;\n\t    var titleHeight = wHeight;\n\t    var titlePointerEvents = \"none\";\n\t    var titleImageWidth = window.innerHeight;\n\t    var titleImageDisplay = \"none\";\n\t    var showTableRow = \"table-row\";\n\t    var seTop = \"\";\n\t    var secondRnd = \"\";\n\t    var thirdRnd = \"\";\n\t    var fourthRnd = \"\";\n\t    \n\t    if (isMobile){\n\t    \tmodalTop = (window.innerHeight -window.innerWidth)*0.5 + \"px\";\n\t    \tmodalLeft = \"0px\";\n\t    \tpetitDisplay = \"inherit\";\n\t    \ttitleWidth = wWidth;\n\t    \ttitleHeight = wWidth;\n\t    \ttitlePointerEvents = \"inherit\";\n\t    \ttitleImageWidth = window.innerWidth;\n\t    \ttitleImageDisplay = \"inherit\";\n\t    \tif ((window.innerWidth/window.innerHeight)>1){\n\t\t\t\tmarqueeFontSize = \"32px\";\n\t\t\t}\n\n\t    }\n\t    \n\n\t    \n\t    this.state = {\n\t      display:\"\",\n\t      uterusImg: \"/textures/mat/cybersecurity_mat.png\",\n\t      projectTitle: \"nahee.app run daddy.app\",\n\t      projectLink:\"https://www.youtube.com/embed/3aWj_jF-htA\",\n\t      wWidth: wWidth,\n\t      wHeight: wHeight,\n\t      logoOpacity:\"\",\n\t      drdLogo:\"\",\n\t      modalTop:modalTop,\n\t      modalLeft:modalLeft,\n\t      petitDisplay:petitDisplay,\n\t      tableHeight: tableHeight +\"px\",\n\t      tableDisplay: \"none\",\n\t      marqueeDisplay: marqueeDisplay,\n\t      formZIndex:30000,\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\",\n\t      marqueeTxt:\"th Daddy Master Class  Register\",\n\t      marqueePointer:\"pointer\",\n\t      marqueeHover:\"\",\n\t      marqueeHover2:\"\",\n\t      focus:0,\n\t      titleWidth: titleWidth,\n\t      titleHeight: titleHeight,\n\t      titlePointerEvents: titlePointerEvents,\n\t      titleImageWidth: titleImageWidth,\n\t      titleImageDisplay: titleImageDisplay,\n\t      showTableRow: showTableRow,\n\t      seTop:seTop,\n\t      secondRnd:secondRnd,\n\t      thirdRnd:thirdRnd,\n\t      fourthRnd:fourthRnd,\n\t      creditDisplay:\"none\",\n\t      mymyText:\"\",\n\t      showDesc:\"inherit\",\n\t      tableFontSize:\"\",\n\t      marqueeFontSize:marqueeFontSize\n\t    };\n    \n\t}\n  componentDidMount() {\n    this.sceneSetup();\n    var myThis = this;\n    // if(isMobile){\n    // \tthis.updateFocus();\n\t   //  this.interval = setInterval(() => myThis.updateFocus(), 2000);\n    // }\n    \t    \t\n    \n    window.addEventListener(\"resize\", this.handleWindowResize);\n    // window.addEventListener(\"orientationchange\", this.handleWindowResize, false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    // window.removeEventListener(\"orientationchange\", this.handleWindowResize);\n    window.cancelAnimationFrame(this.requestID);\n    if(isMobile){\n    \tclearInterval(this.interval);\n    }\n    // this.controls.dispose();\n  }\n\n  updateRnd = () =>{\n  \tvar newSecondRndTxt = \"\";\n  \tvar newThirdRndTxt = \"\";\n  \tvar newFourthRndTxt = \"\";\n  \tvar randInt = Math.floor(Math.random() * Math.floor(6));\n  \tfor (var i = 0; i < randInt+1; i++) {\n  \t\tvar randInt2 = Math.floor(Math.random() * Math.floor(6));\n  \t\tnewSecondRndTxt += randDic[randInt2];\n  \t}\n  \tvar randInt_ = Math.floor(Math.random() * Math.floor(4));\n  \tfor (var i = 0; i < randInt_+1; i++) {\n  \t\tvar randInt3 = Math.floor(Math.random() * Math.floor(6));\n  \t\tnewThirdRndTxt += randDic[randInt3];\n  \t}\n\n\tvar randInt__ = Math.floor(Math.random() * Math.floor(3));\n  \tfor (var i = 0; i < randInt__+1; i++) {\n  \t\tvar randInt4 = Math.floor(Math.random() * Math.floor(6));\n  \t\tnewFourthRndTxt += randDic[randInt4];\n  \t}\n\n  \tthis.setState({\n\t      secondRnd:newSecondRndTxt,\n\t      thirdRnd:newThirdRndTxt,\n\t      fourthRnd:newFourthRndTxt\n\t    });\n    }\n  updateArrow= () => {\n  \tvar symbolLength = 14;\n  \tif(isMobile){\n\t\t\n\t\tif(window.innerHeight>800){\n\t\t\tsymbolLength = 18;\n\t\t}else if((window.innerHeight<800)&&(window.innerHeight>700)){\n\t\t\tsymbolLength = 16;\n\t\t}else if((window.innerHeight<700)&&(window.innerHeight>600)){\n\t\t\tsymbolLength = 13;\n\t\t}else{\n\t\t\tsymbolLength = 12;\n\t\t}\n  \t}\n  \tif (arrowSymbols.length<symbolLength-1){\n  \t\tarrowSymbols += \"\";\n  \t\t// \n  \t\tthis.setState({\n\t      mymyText:arrowSymbols\n\t    });\n  \t}else if (arrowSymbols.length==symbolLength-1){\n  \t\tvar randInt = Math.floor(Math.random() * Math.floor(6));\n  \t\tarrowSymbols += randDic2[randInt];\n  \t\tthis.setState({\n\t      mymyText:arrowSymbols\n\t    });\n  \t}else if (arrowSymbols.length==symbolLength){\n  \t\tarrowSymbols = \"\";\n  \t\tthis.setState({\n\t      mymyText:arrowSymbols\n\t    });\n  \t}\n  \t// else if (arrowSymbols.length==12){\n  \t// \tarrowSymbols += \"\"\n  \t// \tthis.setState({\n\t  //     mymyText:arrowSymbols\n\t  //   });\n  \t// }\n  \t\n  \t\n  }\n\n  updateFocus= () => {\n  \t// console.log(\"this.state.focus\",this.state.focus);\n\n  \t//  this.setState({ focus: Math.floor(Math.random() * Math.floor(3)) })\n  \t // var randInt = Math.floor(Math.random() * Math.floor(3))\n  \t var counterReminder = focusCounter % 7;\n  \t var tf = false;\n  \t if (counterReminder > 4){\n  \t \ttf = true;\n  \t }\n  \t // if (focusCounter!=0){\n  \t \tthis.focusEvent2(this.meshArr[counterReminder], tf);\n  \t // }\n  \t focusCounter += 1;\n  \t counterReminder = focusCounter % 7;\n  \t if (counterReminder > 4){\n  \t \ttf = true;\n  \t }\n  \t this.focusEvent(this.meshArr[counterReminder], tf, counterReminder);\n  }\n\n\n  sceneSetup = () => {\n    // get container dimensions and use them for scene sizing\n\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n\n    var elmnt = document.getElementById(\"marquee\");\n    if (elmnt!= undefined){\n    \tvar tableHeight = height - (elmnt.offsetHeight*2) - 6;\n    var tableTop = elmnt.offsetHeight + 6;\n    this.setState({\n\t      tableHeight: tableHeight + \"px\",\n\t      tableTop: tableTop +\"px\"\n\t    });\n    }\n    \n\t// console.log(\"elmnt.offsetHeight\",elmnt.offsetHeight);\n\n   \t// if (width >= height){\n   \t// \tmobOrDesk = false;\n   \t// }else{\n   \t// \tmobOrDesk = true;\n   \t// }\n\n   \t// if (isMobile){\n   \t// \tmobOrDesk = true;\n   \t// }else if(isBrowser){\n   \t// \tmobOrDesk = false;\n   \t// }\n\n    if (isMobile){\n    \tINSTANCES = 64;\n    \tgltfScale = 1000;\n    }else if(isBrowser){\n    \tINSTANCES = 128;\n    \tgltfScale = 1500;\n    }\n\n    this.scene = new THREE.Scene();\n    //dummy scene\n\t// this.intersectsScene = new THREE.Scene();\n\n\tthis.mouseX = 0;\n\tthis.mouseY = 0;\n\n\tthis.mouse = new THREE.Vector2();\n\n\tthis.targetX = 0;\n\tthis.targetY = 0;\n\n    this.clock = new THREE.Clock();\n\n\tthis.camera = new THREE.PerspectiveCamera( 27, window.innerWidth / window.innerHeight, 1, 10000 );\n\tthis.camera.position.z = 1200;\n\n   \tvar light = new THREE.DirectionalLight( 0xffffff,4 );\n\tlight.position.set( 100, 260, 160 );\n\n\tthis.scene.add(light)\n\n\tvar ambient = new THREE.AmbientLight( 0x222222 );\n\tthis.scene.add( ambient );\n\t\n\n    this.renderer = new THREE.WebGLRenderer();\n    // { alpha: true }\n    // this.renderer.setClearColor( 0x000000, 0 ); \n    this.renderer.physicallyCorrectLights = true;\n    // this.renderer.gammaOutput = true;\n   \tthis.renderer.outputEncoding = THREE.sRGBEncoding;\n    // this.renderer.shadowMap.enabled = true;\n    \n    this.renderer.setPixelRatio( window.devicePixelRatio );\n\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\n\t// container.appendChild( renderer.domElement );\n\t// this.interaction = new Interaction(this.renderer, this.intersectsScene, this.camera);\n\t//renderer.toneMapping = ReinhardToneMapping;\n\n\tthis.stats = new Stats();\n\n\tthis.offsetAttArr = [];\n\tthis.scaleAttArr = [];\n\n\tconst matArraySize = INSTANCES * 4\n\tthis.matrixArray = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray = [];\n\n\tthis.matrixArray2 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray2 = [];\n\n\tthis.matrixArray3 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray3 = [];\n\n\tthis.matrixArray4 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray4 = [];\n\n\tthis.matrixArray5 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray5 = [];\n\t\n\t\n\n\tif (isMobile){\n    \tthis.initInstanceAttributesExtended(400,200,200,0,this.matrixArray,this.matrixAttributeArray,this.mesh, 1);\n\t\t// for gltf1\n\t\tthis.initInstanceAttributesExtended(400,120,200,50,this.matrixArray2,this.matrixAttributeArray2,this.mesh2, 2);\n\n\t\tthis.initInstanceAttributesExtended(300,100,320,100,this.matrixArray3,this.matrixAttributeArray3,this.mesh3, 3);\n\t\t// for gltf2\n\t\tthis.initInstanceAttributesExtended(400,120,50,120,this.matrixArray4,this.matrixAttributeArray4,this.mesh4, 4);\n    }else if(isBrowser){\n    \tthis.initInstanceAttributesExtended(300,150,150,0,this.matrixArray,this.matrixAttributeArray,this.mesh, 1);\n\t\t// for gltf1\n\t\tthis.initInstanceAttributesExtended(500,100,300,300,this.matrixArray2,this.matrixAttributeArray2,this.mesh2, 2);\n\n\t\tthis.initInstanceAttributesExtended(600,200,200,200,this.matrixArray3,this.matrixAttributeArray3,this.mesh3, 3);\n\t\t// for gltf2\n\t\tthis.initInstanceAttributesExtended(500,0,250,150,this.matrixArray4,this.matrixAttributeArray4,this.mesh4, 4);\n    }\n\n\tthis.initTexture();\n\tthis.initBall();\n\n\t// this.onChangeGuiMaterial(this.material);\n\tthis.loadGLTF();\n\tthis.loadGLTF2();\n\tthis.startAnimationLoop();\n\n    this.el.appendChild(this.renderer.domElement); // mount using React ref\n\n    document.addEventListener( 'mousemove', this.onDocumentMouseMove, false );\n  };\n\n  loadGLTF = () => {\n\n  \tvar myThis = this;\n\n\tthis.loader = new GLTFLoader();\n\tconst dracoLoader = new DRACOLoader();\n\tdracoLoader.setDecoderPath( 'three/examples/js/libs/draco/gltf/' );\n\tthis.loader.setDRACOLoader(dracoLoader );\n\tconst ddsLoader = new DDSLoader();\n\tthis.loader.setDDSLoader(ddsLoader );\n\n\tvar loadStartTime = performance.now();\n\tthis.loader.load( 'textures/BoomBoxLight.gltf', function( data ) {\n\n\t\tmyThis.gltf = data;\n\n\t\tvar object = myThis.gltf.scene;\n\n\t\tconsole.info( 'Load time: ' + ( performance.now() - loadStartTime ).toFixed( 2 ) + ' ms.' );\n\n\t\tobject.traverse( function( node ) {\n\n\t\t\tif ( node.material && ( node.material.isMeshStandardMaterial ||\n\t\t\t\t ( node.material.isShaderMaterial && node.material.envMap !== undefined ) ) ) {\n\n\t\t\t\tnode.material.envMap = myThis.envMap;\n\t\t\t\tnode.material.needsUpdate = true;\n\t\t\t}\n\n\t\t} );\n\n\t\tobject.traverse( function ( node ) {\n\n\t\t\t// if ( node.isMesh || node.isLight ) node.castShadow = true;\n\n\t\t} );\n\t\tobject.rotation.y -= Math.PI;\n\t\tmyThis.scene.add( object );\n\t\t\n\n\t\tvar scale = gltfScale;\n\t\tmyThis.meshGLTF = object.children[0]\n\t\tmyThis.meshGLTF.frustumCulled = false\n\t\t// myThis.meshGLTF.visible = guiData.currentMesh === 'gltf'\n\t\tmyThis.meshGLTF.geometry.scale(scale,scale,scale)\n\n\t\tmyThis.materialGLTF = myThis.meshGLTF.material\n\t\tdecorateMaterialWithPerMapTransforms(myThis.materialGLTF)\n\t\t// myThis.applyInstancingToMesh2(myThis.meshGLTF)\n\t\tmyThis.applyInstancingToMeshExtended(myThis.meshGLTF,2)\n\t\tmyThis.meshArr[5] = myThis.meshGLTF;\n\t\t// myThis.meshArr[5].visible = false;\n\n\t\t// myThis.applyIndecisToInstancedMesh(myThis.meshGLTF)\n\n\t}, undefined, function ( error ) {\n\n\t\tconsole.error( error );\n\n\t} );\n\n}\n\n  loadGLTF2 = () => {\n\n  \tvar myThis = this;\n\n\tthis.loader = new GLTFLoader();\n\tconst dracoLoader = new DRACOLoader();\n\tdracoLoader.setDecoderPath( 'three/examples/js/libs/draco/gltf/' );\n\tthis.loader.setDRACOLoader(dracoLoader );\n\tconst ddsLoader = new DDSLoader();\n\tthis.loader.setDDSLoader(ddsLoader );\n\n\tvar loadStartTime = performance.now();\n\tthis.loader.load( 'textures/hey/BoomBoxLight.gltf', function( data ) {\n\n\t\tmyThis.gltf2 = data;\n\n\t\tvar object = myThis.gltf2.scene;\n\n\t\t// console.info( 'Load time: ' + ( performance.now() - loadStartTime ).toFixed( 2 ) + ' ms.' );\n\n\t\tobject.traverse( function( node ) {\n\n\t\t\tif ( node.material && ( node.material.isMeshStandardMaterial ||\n\t\t\t\t ( node.material.isShaderMaterial && node.material.envMap !== undefined ) ) ) {\n\n\t\t\t\tnode.material.envMap = myThis.envMap;\n\t\t\t\tnode.material.needsUpdate = true;\n\t\t\t}\n\n\t\t} );\n\n\t\t\n\t\tobject.rotation.y -= Math.PI;\n\t\tmyThis.scene.add( object );\n\t\t// object.position.x = 500;\n\n\t\tvar scale = gltfScale;\n\t\tmyThis.meshGLTF2 = object.children[0]\n\t\tmyThis.meshGLTF2.frustumCulled = false\n\t\tmyThis.meshGLTF2.geometry.scale(scale,scale,scale)\n\n\t\tmyThis.meshArr[6] = myThis.meshGLTF2;\n\t\t// myThis.meshArr[6].visible = false;\n\t\tmyThis.materialGLTF2 = myThis.meshGLTF2.material\n\t\tdecorateMaterialWithPerMapTransforms(myThis.materialGLTF2)\n\t\tmyThis.applyInstancingToMeshExtended(myThis.meshGLTF2, 4)\n\n\t\tmyThis.setState({\n\t      logoOpacity:\"logoAnimation\",\n\t      drdLogo:\"drdLogoAnimation\"\n\t    });\n\t    myThis.interval = setInterval(() => myThis.updateRnd(), 200);\n\t\t// myThis.applyInstancingToMesh4(myThis.meshGLTF2)\n\t\t// myThis.applyIndecisToInstancedMesh(myThis.meshGLTF)\n\n\t}, undefined, function ( error ) {\n\n\t\tconsole.error( error );\n\n\t} );\n\n}\n\n\tinitTexture = () => {\n\n\t\tvar myThis = this;\n\n\t\tthis.texture = new THREE.TextureLoader().load( 'textures/mat/naheerun_mat.png' )\n\t\tthis.texture.wrapS = this.texture.wrapT = THREE.RepeatWrapping\n\t\tthis.texture.name = \"texture\"\n\n\t\tthis.texture3 = new THREE.TextureLoader().load( 'textures/mat/ospapax_mat.png' )\n\t\tthis.texture3.wrapS = this.texture3.wrapT = THREE.RepeatWrapping\n\t\tthis.texture3.name = \"texture3\"\n\n\t\tthis.texture4 = new THREE.TextureLoader().load( 'textures/mat/oogenesis_mat.png' )\n\t\tthis.texture4.wrapS = this.texture4.wrapT = THREE.RepeatWrapping\n\t\tthis.texture4.name = \"texture4\"\n\n\t\tthis.texture5 = new THREE.TextureLoader().load( 'textures/mat/what_mat.png' )\n\t\tthis.texture5.wrapS = this.texture5.wrapT = THREE.RepeatWrapping\n\t\tthis.texture5.name = \"texture5\"\n\n\t\tthis.texture6 = new THREE.TextureLoader().load( 'textures/mat/spermtank_mat.png' )\n\t\tthis.texture6.wrapS = this.texture6.wrapT = THREE.RepeatWrapping\n\t\tthis.texture6.name = \"texture6\"\n\n\t\tthis.envMap = new THREE.TextureLoader().load( 'textures/pp_new_2.jpg', function ( texture ) {\n\n\t\t\ttexture.mapping = THREE.EquirectangularReflectionMapping;\n\t\t\ttexture.encoding = THREE.sRGBEncoding;\n\t\t\tif ( myThis.mesh ) myThis.material.needsUpdate = true;\n\t\t\tif ( myThis.meshGLTF ) myThis.materialGLTF.needsUpdate = true;\n\t\t\tif ( myThis.meshGLTF2 ) myThis.materialGLTF2.needsUpdate = true;\n\n\t\t} );\n\n\t\tthis.envMap.name = \"envMap\"\n\t}\n\n\tinitBall = () => {\n\n\t\tthis.material = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0xff0000,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture6,\n\t\t\t})\n\t\t)\n\t\tthis.material2 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0x00ff00,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture,\n\t\t\t})\n\t\t)\n\t\tthis.material3 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0x0000ff,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture3,\n\t\t\t})\n\t\t)\n\t\tthis.material4 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0xffff00,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture4,\n\t\t\t})\n\t\t)\n\t\tthis.material5 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0xff00ff,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture5,\n\t\t\t})\n\t\t)\n\n\t\tdecorateMaterialWithPerMapTransforms(this.material)\n\n\n\t\tthis.mesh = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material)\n\t\tthis.mesh2 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material2)\n\t\tthis.mesh3 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material3)\n\t\tthis.mesh4 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material4)\n\t\tthis.mesh5 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material5)\n\t\t// this.mesh.visible = false;\n\t\t// this.mesh2.visible = false;\n\t\t// this.mesh3.visible = false;\n\t\t// this.mesh4.visible = false;\n\t\t// this.mesh5.visible = false;\n\t\tthis.meshArr = [this.mesh, this.mesh2, this.mesh3, this.mesh4,this.mesh5];\n\n\t\tthis.mesh.material.needsUpdate = true;\n\t\tthis.mesh2.material.needsUpdate = true;\n\t\tthis.mesh3.material.needsUpdate = true;\n\t\tthis.mesh4.material.needsUpdate = true;\n\t\tthis.mesh5.material.needsUpdate = true;\n\t\tthis.scene.add(this.mesh);\n\t\t// this.mesh2.rotation.y -= Math.PI;\n\t\tthis.scene.add(this.mesh2);\n\t\t// this.mesh3.rotation.z -= Math.PI;\n\t\tthis.scene.add(this.mesh3);\n\t\tthis.scene.add(this.mesh4);\n\t\tthis.mesh5.rotation.y -= Math.PI;\n\t\tthis.scene.add(this.mesh5);\n\n\n\t\tthis.material.glossinessMap = this.texture \n\n\t\tthis.applyInstancingToMeshExtended(this.mesh,1)\n\t\tthis.applyInstancingToMeshExtended(this.mesh2,2)\n\t\tthis.applyInstancingToMeshExtended(this.mesh3,3)\n\n\t\tthis.applyInstancingToMeshExtended(this.mesh4,4)\n\t\tthis.applyInstancingToMeshExtended(this.mesh5,3)\n\n\n\t}\n\n\n\tinitInstanceAttributesExtended = (max, minus,minus2,minus3, array, attArray, meshName, n) => {\n\t\t//create geometry attributes\n\t\t// NURBS curve\n\n\t\t\t\tconst nurbsControlPoints = [];\n\t\t\t\tconst nurbsKnots = [];\n\t\t\t\tconst nurbsDegree = 3;\n\n\t\t\t\tfor ( let i = 0; i <= nurbsDegree; i ++ ) {\n\n\t\t\t\t\tnurbsKnots.push( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, j = 10; i < j; i ++ ) {\n\n\t\t\t\t\tnurbsControlPoints.push(\n\t\t\t\t\t\tnew THREE.Vector4(\n\t\t\t\t\t\t\tMath.random() * max - minus,\n\t\t\t\t\t\t\tMath.random() * max - minus2,\n\t\t\t\t\t\t\tMath.random() * max - minus3,\n\t\t\t\t\t\t\t-100 // weight of control point: higher means stronger attraction\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tconst knot = ( i + 1 ) / ( j - nurbsDegree );\n\t\t\t\t\tnurbsKnots.push( THREE.MathUtils.clamp( knot, 0, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t\tconst nurbsCurve = new NURBSCurve( nurbsDegree, nurbsKnots, nurbsControlPoints );\n\n\t\t// var knot = new Curves.TorusKnot( 60 );\n\t\tvar positions = nurbsCurve.getSpacedPoints( INSTANCES );\n\n\t\tvar offsets = new Float32Array( INSTANCES * 3 ); // xyz\n\t\tvar scales = new Float32Array( INSTANCES * 1 ); // s\n\t\t// var colors = new Float32Array( INSTANCES * 3 ); \n\n\t\tvar myThis = this;\n\n\t\tvar dummy2 = [];\n\t\tvar dummy4 = [];\n\t\tvar dummy3 = [];\n\n\t\tfor ( var i = 0, l = INSTANCES; i < l; i ++ ) {\n\n\t\t\tvar object = new THREE.Mesh(new THREE.SphereBufferGeometry(12)) \n\t\t\tvar object2;\n\n\t\t\tobject.userData.index = i //keep for mapping to attribute\n\n\t\t\tvar index = 3 * i;\n\n\t\t\t// per-instance position offset\n\t\t\toffsets[ index ] = positions[ i ].x;\n\t\t\toffsets[ index + 1 ] = positions[ i ].y;\n\t\t\toffsets[ index + 2 ] = positions[ i ].z;\n\n\t\t\tobject.position.x = positions[ i ].x;\n\t\t\tobject.position.y = positions[ i ].y;\n\t\t\tobject.position.z = positions[ i ].z;\n\n\t\t\t// per-instance scale variation\n\t\t\tscales[ i ] = 2 + 0.5 * Math.sin( frequency * Math.PI * i / INSTANCES );\n\t\t\tobject.scale.x = scales[ i ];\n\t\t\tobject.scale.y = scales[ i ];\n\t\t\tobject.scale.z = scales[ i ];\n\n\t\t// \tthis.intersectsScene.add( object );\n\t\t\t\n\t\t// \tobject.cursor = \"pointer\";\n\n\t\t// \tobject.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[n-1], n-1);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t\t\n\t\t// \t// console.log(\"mouseover\",this.mesh);\n\t\t// \tobject.on('mouseover',\n\t\t// \t\tfunction(ev) {\n\t\t// \t\t myThis.goEvent(ev, myThis.meshArr[n-1], false, n-1);\n\t\t// }\n\n\t\t// \t);\n\t\t// \tobject.on('mouseout', function(ev) {\n\t\t// \t\t myThis.goEvent2(ev, myThis.meshArr[n-1], false);\n\t\t// });\n\n\t\t// \tif (n==2){\n\t\t// \t\t//cybersecurity4uterus\n\t\t// \t\tobject2 = object.clone();\n\n\t\t// \t\tobject2.position.x *= -1.0;\n\t\t// \t\tobject2.position.z *= -1.0;\n\n\t\t// \t\t// this.intersectsScene.children[INSTANCES*5+i] = object2 ;\n\t\t// \t\tdummy2.push(object2);\n\t\t// \t\tobject2.cursor = \"pointer\";\n\n\t\t// \t\tobject2.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[5],5);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseover',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEvent(ev, myThis.meshArr[5],true, 5);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseout', function(ev) {\n\t\t// \t\t\t myThis.goEvent2(ev, myThis.meshArr[5],true);\n\t\t// \t});\n\t\t// \t\t// object2.updateMatrixWorld()\n\t\t// \t}\n\t\t// \tif (n==4){\n\t\t// \t\t//nahee run daddy\n\t\t// \t\tobject2 = object.clone();\n\n\t\t// \t\tobject2.position.x *= -1.0;\n\t\t// \t\tobject2.position.z *= -1.0;\n\t\t// \t\tdummy4.push(object2);\n\t\t// \t\t// this.intersectsScene.add( object2 );\n\t\t// \t\t// this.intersectsScene.children[INSTANCES*6+i] = object2 ;\n\t\t// \t\tobject2.cursor = \"pointer\";\n\t\t// \t\tobject2.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[6],6);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseover',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEvent(ev, myThis.meshArr[6],true, 6);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseout', function(ev) {\n\t\t// \t\t\t myThis.goEvent2(ev, myThis.meshArr[6],true);\n\t\t// \t});\n\t\t// \t\t// object2.updateMatrixWorld()\n\t\t// \t}\n\t\t// \tif (n==3){\n\t\t// \t\t//What is daddy residency?\n\t\t// \t\tobject2 = object.clone();\n\n\t\t// \t\tobject2.position.x *= -1.0;\n\t\t// \t\tobject2.position.z *= -1.0;\n\t\t// \t\tdummy3.push(object2);\n\t\t// \t\t// this.intersectsScene.add( object2 );\n\t\t// \t\t// this.intersectsScene.children[INSTANCES*4+i] = object2;\n\n\t\t// \t\tobject2.cursor = \"pointer\";\n\t\t// \t\tobject2.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[4],4);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseover',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEvent(ev, myThis.meshArr[4], false, 4);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseout', function(ev) {\n\t\t// \t\t\t myThis.goEvent2(ev, myThis.meshArr[4], false);\n\t\t// \t});\n\t\t// \t\t// object2.updateMatrixWorld()\n\t\t// \t}\n\t\t\t\n\n\t\t// \tobject.updateMatrixWorld()\n\t\t\t\t\n\t\t// }\n\t\t// // console.log(\"dummy3\",dummy3.length);\n\t\t// if (dummy3.length > 0){\n\t\t// \tvar theLimit = 128;\n\t\t// \tif(isMobile){\n\t\t// \t\ttheLimit = 64;\n\t\t// \t}\n\t\t// \tfor (var i = 0; i <theLimit; i++) {\n\t\t// \t\tthis.intersectsScene.add(dummy3[i]);\n\t\t// \t}\n\t\t\t\n\t\t// }\n\t\t// if (dummy2.length > 0){\n\t\t// \tvar theLimit = 128;\n\t\t// \tif(isMobile){\n\t\t// \t\ttheLimit = 64;\n\t\t// \t}\n\t\t// \tfor (var i = 0; i <theLimit; i++) {\n\t\t// \t\tthis.intersectsScene.add(dummy2[i]);\n\t\t// \t}\n\t\t// }\n\t\t// if (dummy4.length > 0){\n\t\t// \tvar theLimit = 128;\n\t\t// \tif(isMobile){\n\t\t// \t\ttheLimit = 64;\n\t\t// \t}\n\t\t// \tfor (var i = 0; i <theLimit; i++) {\n\t\t// \t\tthis.intersectsScene.add(dummy4[i]);\n\t\t// \t}\n\t\t}\n\t\t\n\t\t// // this.intersectsScene.add( new THREE.Mesh(new THREE.SphereBufferGeometry(100), this.material) );\n\n\t\t// this.intersectsScene.updateMatrixWorld(true);\n\n\t\t// this.instanceColorAttribute2 = new THREE.InstancedBufferAttribute( colors, 3 )\n\t\tthis.instanceOffsetAttribute2 = new THREE.InstancedBufferAttribute( offsets, 3 )\n\t\tthis.instanceScaleAttribute2 = new THREE.InstancedBufferAttribute( scales, 1 )\n\n\t\t// this.colorAttArr[n-1] = this.instanceColorAttribute2;\n\t\tthis.offsetAttArr[n-1] = this.instanceOffsetAttribute2;\n\t\tthis.scaleAttArr[n-1] = this.instanceScaleAttribute2;\n\t}\n\n\n\tapplyInstancingToMeshExtended = (mesh,n) => {\n\t\tvar indecis = new Float32Array( INSTANCES ); \n\n\t\tfor ( var i = 0, l = INSTANCES; i < l; i ++ ) {\n\t\t\tindecis[i] = i / INSTANCES\n\t\t}\n\n\t\tmesh.geometry.addAttribute('aIndex', new THREE.InstancedBufferAttribute( indecis, 1 ) )\n\n\t\tvar uTime = { value: 0, type: 'float', stage: 'vertex' }\n\t\tmesh.material.userData.uTime = uTime\n\t\t// console.log(\"mesh.material.shaderUniforms.uTime\",mesh.material.shaderUniforms );\n\t\t//we expose it as a primitive\n\t\tObject.defineProperty(mesh.material, 'time', {\n\t\t\tget:()=>uTime.value,\n\t\t\tset:v=>uTime.value = v\n\t\t})\n\t\tvar uScale = { value: 1.5, type: 'float', stage: 'vertex' }\n\t\tmesh.material.userData.uScale = uScale\n\t\t// console.log(\"mesh.material.shaderUniforms.uTime\",mesh.material.shaderUniforms );\n\t\t//we expose it as a primitive\n\t\tObject.defineProperty(mesh.material, 'scale', {\n\t\t\tget:()=>uScale.value,\n\t\t\tset:v=>uScale.value = v\n\t\t})\n\n\t\tvar uSelected = { value: false, type: 'boolean' }\n\t\tObject.defineProperty(mesh, 'selected', {\n\t\t\tget:()=>uSelected.value,\n\t\t\tset:v=>uSelected.value = v\n\t\t})\n\n\t\tdecorateMaterialWithSimpleInstancing2(mesh.material)\n\t\tmesh.customDepthMaterial = decorateMaterialWithSimpleInstancing(\n\t\t\tnew THREE.MeshDepthMaterial({ depthPacking: THREE.RGBADepthPacking })\n\t\t)\n\t\tmesh.material.needsUpdate = true;\n\n\t\tmesh.geometry = new THREE.InstancedBufferGeometry().copy(mesh.geometry)\n\n\t\tmesh.geometry.instanceCount = INSTANCES\n\n\t\t// mesh.geometry.setAttribute( 'instanceColor', this.colorAttArr[n-1] );\n\t\tmesh.geometry.setAttribute( 'instanceOffset', this.offsetAttArr[n-1]);\n\t\tmesh.geometry.setAttribute( 'instanceScale', this.scaleAttArr[n-1] );\n\t\t\n\t\t// for shadow\n\t\tmesh.customDepthMaterial.userData = { uTime: mesh.material.userData.uTime }//wire this by reference, whenever prop updates material uniform this material updates too by referencing the same uniform\n\t\t// mesh.customDepthMaterial.userData = { uScale: mesh.material.userData.uScale }\n\t}\n\n  onDocumentMouseMove = ( event ) => {\n\n    var windowHalfX = window.innerWidth / 2;\n    var windowHalfY = window.innerHeight / 2;\n    var myThis2 = this;\n        myThis2.mouseX = ( event.clientX - windowHalfX ) / 2;\n        myThis2.mouseY = ( event.clientY - windowHalfY ) / 2;\n\n    myThis2.mouse.x = event.clientX;\n    myThis2.mouse.y = event.clientY;\n\n      }\n\n    focusEvent = (param, tf,n) => {\n\n    \t// this.interval = setInterval(() => myThis.updateFocus(), 2000);\n\t\tif (param){\n\n\t\t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1.9;\n\t\t\t\tparam.material.emissive.g = 1.8;\n\t\t\t\tparam.material.emissive.b = 1.9;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .9;\n\t\t\t\tparam.material.emissive.g = .8;\n\t\t\t\tparam.material.emissive.b = .9;\n\t\t\t\tparam.material.emissiveIntensity = .4;\n\t\t\t}\n\t\t\t// param.visible = false;\n\t\t}\n\t\tthis.setState({\n\t       projectTitle: projectTitles2[n],\n\t       // uterusImg: \"/textures/mat/\"+projectTitles[n] +\"_mat.png\"\n\t    });\n\t}\n focusEvent2 = (param, tf) => {\n \tif (param){\n \t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1;\n\t\t\t\tparam.material.emissive.g = 1;\n\t\t\t\tparam.material.emissive.b = 1;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .0;\n\t\t\t\tparam.material.emissive.g = .0;\n\t\t\t\tparam.material.emissive.b = .0;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}\n\t\t\t// param.visible = true;\n\t\t}\n\t\t\n\t}\n\n  goEvent = (ev, param, tf, n) => {\n\t\t// console.log(\"oh clicked\",param);\n\t\t// if (param){\n\n\t\t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1.9;\n\t\t\t\tparam.material.emissive.g = 1.8;\n\t\t\t\tparam.material.emissive.b = 1.9;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .9;\n\t\t\t\tparam.material.emissive.g = .8;\n\t\t\t\tparam.material.emissive.b = .9;\n\t\t\t\tparam.material.emissiveIntensity = .6;\n\t\t\t}\n\t\t// }\n\t\tvar mHeight = window.innerHeight;\n\t\tthis.setState({\n\t      modalTop: this.mouse.y - (mHeight*0.5) + \"px\",\n\t      modalLeft:this.mouse.x - (mHeight*0.5) + \"px\",\n\t      petitDisplay:\"none\",\n\t       projectTitle: projectTitles2[n]\n\t    });\n\t\t\n\t}\n goEvent2 = (ev, param, tf, n) => {\n \tif (param){\n \t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1;\n\t\t\t\tparam.material.emissive.g = 1;\n\t\t\t\tparam.material.emissive.b = 1;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .0;\n\t\t\t\tparam.material.emissive.g = .0;\n\t\t\t\tparam.material.emissive.b = .0;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\tthis.setState({\n\t      petitDisplay:\"none\"\n\t    });\n\t\t\n\t}\n\tgoEventClicked = (ev, param, n) => {\n\n\t\t\tthis.setState({\n\t      // display: \"display\",\n\t      // uterusImg: \"/textures/mat/\"+projectTitles[n] +\"_mat.png\",\n\t      // projectTitle: projectTitles2[n],\n\t      // projectLink: projectLinks[n],\n\t      // marqueeTxt:projectTitles2[n],\n\t      // marqueePointer:\"inherit\"\n\t    });\n\t\t// }\n\t\t\n\t}\n\ttitleClicked = (param) => {\n\n\t\tvar n = focusCounter % 7;\n\t\t\tthis.setState({\n\t      display: \"display\",\n\t      uterusImg: \"/textures/mat/\"+projectTitles[n] +\"_mat.png\",\n\t      projectTitle: projectTitles2[n],\n\t      projectLink: projectLinks[n],\n\t      marqueeTxt:projectTitles2[n],\n\t      marqueePointer:\"inherit\"\n\t    });\n\t\t// }\n\t\t\n\t}\n\n  startAnimationLoop = () => {\n  \t\n \t\n\t\tthis.targetX = this.mouseX * .001;\n\t\tthis.targetY = this.mouseY * .001;\n\n\t\tvar delta = this.clock.getDelta() * 0.01 * 1;\n\t\tif ( this.mesh ) {\n\n\t\t\tif (isBrowser) {\n\t\t\t\tthis.mesh.rotation.y += 0.05 * ( this.targetX - this.mesh.rotation.y );\n\t\t\t\tthis.mesh.rotation.x += 0.05 * ( this.targetY - this.mesh.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh.material.time += delta;\n\t\t\tif(this.mesh.selected){\n\t\t\t\t// console.log(\"it's selected\");\n\t\t\t\t// if(this.mesh.material.scale<5){\n\t\t\t\t// \tthis.mesh.material.scale += delta*300;\n\t\t\t\t// }\n\t\t\t\t// this.mesh.material.userData.uScale.value = this.mesh.material.scale;\n\t\t\t}else{\n\t\t\t\t// console.log(\"it's not selected\");\n\t\t\t\t// if(this.mesh.material.scale>2.5){\n\t\t\t\t// \tthis.mesh.material.scale -= delta*300;\n\t\t\t\t// }\n\t\t\t\t// this.mesh.material.userData.uScale.value = this.mesh.material.scale;\n\t\t\t}\n\t\t\t\n\t\t\tthis.mesh.material.userData.uTime.value = this.mesh.material.time;\n\t\t\t\n\t\t\tthis.mesh.material.needsUpdate = true;\n\t\t\t// console.log(\"color\", this.mesh.material.scale);\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh4 ) {\n\n\t\t\tif (isBrowser) {\n\t\t\t\tthis.mesh4.rotation.y += 0.05 * ( this.targetX - this.mesh4.rotation.y );\n\t\t\t\tthis.mesh4.rotation.x += 0.05 * ( this.targetY - this.mesh4.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh4.material.time += delta\n\t\t\tthis.mesh4.material.userData.uTime.value = this.mesh4.material.time;\n\t\t\tthis.mesh4.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh5 ) {\n\n\t\t\tif (isBrowser) {\n\t\t\t\tthis.mesh5.rotation.y += 0.05 * ( this.targetX - this.mesh5.rotation.y );\n\t\t\t\tthis.mesh5.rotation.x += 0.05 * ( this.targetY - this.mesh5.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh5.rotation.y = this.mesh3.rotation.y + Math.PI;\n\t\t\tthis.mesh5.material.time += delta\n\t\t\tthis.mesh5.material.userData.uTime.value = this.mesh5.material.time;\n\t\t\tthis.mesh5.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh2 ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.mesh2.rotation.y += 0.05 * ( this.targetX - this.mesh2.rotation.y );\n\t\t\t\tthis.mesh2.rotation.x += 0.05 * ( this.targetY - this.mesh2.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh2.material.time += delta\n\t\t\tthis.mesh2.material.userData.uTime.value = this.mesh2.material.time;\n\t\t\tthis.mesh2.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh3 ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.mesh3.rotation.y += 0.05 * ( this.targetX - this.mesh3.rotation.y );\n\t\t\t\tthis.mesh3.rotation.x += 0.05 * ( this.targetY - this.mesh3.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh3.material.time += delta\n\t\t\tthis.mesh3.material.userData.uTime.value = this.mesh3.material.time;\n\t\t\tthis.mesh3.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\n\t\tif ( this.meshGLTF ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.meshGLTF.rotation.y += 0.05 * ( this.targetX - this.meshGLTF.rotation.y );\n\t\t\t\tthis.meshGLTF.rotation.x += 0.05 * ( this.targetY - this.meshGLTF.rotation.x );\n\t\t\t}\n\n\t\t\tthis.meshGLTF.material.time += delta;\n\n\t\t}\n\t\tif ( this.meshGLTF2 ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.meshGLTF2.rotation.y += 0.05 * ( this.targetX - this.meshGLTF2.rotation.y );\n\t\t\t\tthis.meshGLTF2.rotation.x += 0.05 * ( this.targetY - this.meshGLTF2.rotation.x );\n\t\t\t}\n\n\t\t\tthis.meshGLTF2.material.time += delta;\n\n\t\t}\n\t    this.renderer.render(this.scene, this.camera);\n\t    this.stats.end();\n\n    // The window.requestAnimationFrame() method tells the browser that you wish to perform\n    // an animation and requests that the browser call a specified function\n    // to update an animation before the next repaint\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n\n  };\n\n  removeModal = () => {\n  \t// console.log(\"jey\");\n  \tthis.setState({\n\t      display: \"none\",\n\t      marqueeTxt:\"th Daddy Master Class  Register\",\n\t      marqueePointer:\"pointer\"\n\t    });\n  }\n  test = () =>{\n  \t// console.log(\"hey for test\");\n  \tthis.setState({\n\t      tableDisplay: \"none\"\n\t    });\n  \ttableShow = !tableShow;\n  }\n\n  changeRowColor=()=>{\n  \tif (this.state.rowColor == \"white\"){\n  \t\tthis.setState({\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor:\"white\",\n\t      rowTextColor:\"black\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}\n  }\n  changeRowColor2=()=>{\n  \tif (this.state.rowColor2 == \"white\"){\n  \t\tthis.setState({\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor2:\"white\",\n\t      rowTextColor2:\"black\",\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}\n  }\n  changeRowColor3=()=>{\n  \tif (this.state.rowColor3 == \"white\"){\n  \t\tthis.setState({\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor3:\"white\",\n\t      rowTextColor3:\"black\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}\n  }\n  changeRowColor4=()=>{\n  \tif (this.state.rowColor4 == \"white\"){\n  \t\tthis.setState({\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor4:\"white\",\n\t      rowTextColor4:\"black\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\"\n\t    });\n  \t}\n  }\n  handleZIndex = () =>{\n  \t// console.log(\"hey for test\");\n  \tif (this.state.formZIndex < 35000){\n  \t\tthis.setState({\n\t      formZIndex: 40000\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      formZIndex: 30000\n\t    });\n  \t}\n  \t\n  }\n\nshowTable = () => {\n  \t// console.log(\"jey\");\n  \tconst width = document.documentElement.clientWidth;\n    \tconst height = document.documentElement.clientHeight;\n  \tif (firstTime){\n  \t\tthis.interval = setInterval(() => this.updateArrow(), 300);\n  \t\t\n  \t\t if(isMobile){\n\t    \tif ((width/height)<1){\n\t    \t\tif (window.innerWidth < 420) {\n\t\t    \t\tthis.setState({\n\t\t\t\t      \tshowTableRow:\"none\",\n\t\t    \t\t\tseTop:\"90px\"\n\t\t\t\t    });\n\t\t    \t\n\t    \t}\n\t    }\n\t    \tif ((width/height)>1){\n\t\t\t\tthis.setState({\n\t\t\t      \tshowTableRow:\"none\",\n\t    \t\t\tseTop:\"90px\",\n\t    \t\t\tshowDesc:\"none\",\n\t    \t\t\ttableFontSize:\"9px\",\n\t    \t\t\tmarqueeFontSize:\"32px\"\n\t\t\t    });\n\t    \t}\n\t    }\n\t    firstTime = false;\n  \t}\n  \tif (tableShow){\n  \t\tthis.setState({\n\t      tableDisplay: \"none\",\n\t      petitDisplay:\"none\"\n\t    });\n\t    tableShow = !tableShow;\n\t    clearInterval(this.interval);\n\t    firstTime = true;\n\t    arrowSymbols = \"\";\n  \t}else{\n  \t\t// if(!creditShow){\n  \t\t\tif (this.state.marqueeTxt == \"th Daddy Master Class  Register\"){\n  \t\t\t\tvar tempCreditShow = this.state.creditDisplay;\n  \t\t\t\tif (creditShow){\n  \t\t\t\t\ttempCreditShow = \"none\";\n  \t\t\t\t\tcreditShow = false;\n  \t\t\t\t}\n  \t\t\t\tif(isMobile){\n\t\t\t    \tif ((width/height)<1){\n\t\t\t\t    \t\tthis.setState({\n\t\t\t\t\t\t      \tshowDesc:\"inherit\"\n\t\t\t\t\t\t    });\n\t\t\t    \t}\n\t\t\t    }\n\t  \t\t\tthis.setState({\n\t\t\t      \ttableDisplay: \"inherit\",\n\t\t      \t\tpetitDisplay:\"none\",\n\t\t      \t\tcreditDisplay:tempCreditShow\n\t\t\t    });\n\t\t\t    tableShow = !tableShow;\n\t  \t\t}\n  \t\t// }\n  \t\t\n  \t}\n  }\n  showCredit = () => {\n  \t// console.log(\"jey\");\n  \tif (creditShow){\n  \t\tthis.setState({\n\t      creditDisplay: \"none\"\n\t    });\n\t    creditShow = !creditShow;\n  \t}else{\n  \t\tif(!tableShow){\n  \t\t\tthis.setState({\n\t\t\t    creditDisplay: \"inherit\"\n\t\t    });\n\t\t    creditShow = !creditShow;\n  \t\t}\n  \t\t\n  \t}\n  }\n\n  toggleMarqueeHover= () =>{\n  \t// console.log(\"marqueeHovered\",marqueeHovered);\n  \tif (marqueeHovered){\n  \t\tthis.setState({\n\t      marqueeHover: \"\"\n\t    });\n\t    marqueeHovered = !marqueeHovered;\n  \t}else{\n  \t\tif (this.state.display != \"display\"){\n  \t\t\tthis.setState({\n\t\t      marqueeHover: \"marqueeHover\"\n\t\t    });\n\t\t    marqueeHovered = !marqueeHovered;\n  \t\t}\n  \t}\n  \t\n  }\n\n  toggleMarqueeHover2= () =>{\n  \t// console.log(\"marqueeHovered\",marqueeHovered);\n  \tif (marqueeHovered2){\n  \t\tthis.setState({\n\t      marqueeHover2: \"\"\n\t    });\n\t    marqueeHovered2 = !marqueeHovered2;\n  \t}else{\n  \t\tif (this.state.display != \"display\"){\n  \t\t\tthis.setState({\n\t\t      marqueeHover2: \"marqueeHover\"\n\t\t    });\n\t\t    marqueeHovered2 = !marqueeHovered2;\n  \t\t}\n  \t}\n  \t\n  }\n\n  handleWindowResize = () => {\n    // const width = this.el.clientWidth;\n    // const height = this.el.clientHeight;\n\tconst width = document.documentElement.clientWidth;\n    const height = document.documentElement.clientHeight;\n    this.setState({\n      wWidth:document.documentElement.clientWidth,\n      wHeight:document.documentElement.clientHeight\n    });\n    if (isMobile){\n    \tINSTANCES = 64;\n    \tgltfScale = 1000;\n    }else if(isBrowser){\n    \tINSTANCES = 128;\n    \tgltfScale = 1500;\n    }\n\n\n    // this.sceneSetup();\n    var elmnt = document.getElementById(\"marquee\");\n    if (elmnt!= undefined){\n    \tvar tableHeight = height - (elmnt.offsetHeight*2) - 6;\n    var tableTop = elmnt.offsetHeight + 6;\n    var showDesc = \"inherit\";\n    var tableFontSize = \"\";\n    var marqueeFontSize = \"\";\n    if (isMobile){\n    \tif ((width / height) > 1){\n\t    \tshowDesc = \"none\";\n\t    \ttableFontSize = \"9px\";\n\t    \tmarqueeFontSize = \"32px\";\n\t    \t// tableHeight = height - (35*2) - 6;\n\t    }\n    }\n    \n    this.setState({\n\t      tableHeight: tableHeight + \"px\",\n\t      tableTop: tableTop +\"px\",\n\t      showDesc: showDesc,\n\t      tableFontSize: tableFontSize,\n\t      marqueeFontSize:marqueeFontSize\n\t    });\n    }\n\n        this.camera.aspect = width / height;\n    // if(isBrowser){\n    \tthis.renderer.setSize(width, height);\n    \tthis.camera.updateProjectionMatrix();\n    \t\n    // }\n  };\n\n  render() {\n\n    return <div style={{overflowY:\"hidden\",width:this.state.wWidth,height:this.state.wHeight}}>\n    <div style={{overflowY:\"hidden\",position:\"fixed\",top:\"0px\",left:\"0px\",width:this.state.wWidth,height:this.state.wHeight}} ref={ref => (this.el = ref)}>\n    </div>\n    \n    <div className={`modal ${this.state.display}`} style={{position:\"fixed\",top:\"0px\",left:\"0px\",width:this.state.wWidth,height:this.state.wHeight, background:\"rgba(49,0,119,0.3)\"}}>\n    <div onClick={this.removeModal} className=\"removeBtn\"><br/></div>\n    <div className=\"thumbnail\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n    <div className=\"excerpt1\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n            <div className=\"thumbnail3\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n    <div className=\"thumbnail5\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n      <div className=\"thumbnail6\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n    \n    <div className=\"thumbnail8\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n    <div className=\"thumbnail2\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n        <div className=\"frame\">\n\n</div>\n         \n\n    </div>\n    <div className={`marquee ${this.state.marqueeHover}`} onClick={this.showTable} onMouseEnter={this.toggleMarqueeHover} onMouseLeave={this.toggleMarqueeHover} id=\"marquee\" style={{fontSize:this.state.marqueeFontSize,cursor:this.state.marqueePointer}}>\n\t  <div>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span style={{display:this.state.marqueeDisplay}}>th Daddy Master Class  Register</span>\n\t  </div>\n\t</div>\n\t<div className={`marquee2 ${this.state.marqueeHover2}`} onClick={this.showTable} onMouseEnter={this.toggleMarqueeHover2} onMouseLeave={this.toggleMarqueeHover2} style={{fontSize:this.state.marqueeFontSize,cursor:this.state.marqueePointer}}>\n\t  <div>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span style={{display:this.state.marqueeDisplay}}>th Daddy Master Class  Register</span>\n\t  </div>\n\t</div>\n\t<div className=\"creditDiv\" style={{display:this.state.creditDisplay}}>\n\t<div className=\"creditDivInner\">\n\t<br />\n\t\tpresented by<br />\n\t\t<a href=\"https://www.instagram.com/eobchae2020/\" target=\"_blank\">eobchae</a><br />\n\t\t<br />\n\t\t<br />\n\t\t<br />\n\t\tcreated by<br />\n\t\t<a href=\"https://www.instagram.com/nahee.app/\" target=\"_blank\">nahee.app</a><br />\n\t\t<br />\n\t\t<br />\n\t\t<br />\n\t\tsupported by<br />\n\t\t<img src=\"support.png\" className=\"support\" /><br />\n\t\t<img src=\"njp_logo.png\" className=\"support2\" /><br />\n\t\t</div>\n\t</div>\n\t<div className=\"creditClose\" onClick={this.showCredit} style={{display:this.state.creditDisplay}}>&nbsp;</div>\n\n\t<div className=\"credit\" onClick={this.showCredit}>\n\t<br />\n\t{this.state.secondRnd}<br />\n\t{this.state.thirdRnd}<br />\n\t{this.state.fourthRnd}<br />\n\t<br />\n\t</div>\n\n\n\t<div className=\"table_container\" style={{display:this.state.tableDisplay, top:this.state.tableTop, height:this.state.tableHeight}}>\n\t<div onClick={this.showTable} className=\"removeBtn2\"><br/></div>\n\t<div id=\"table_div\" style={{fontSize:this.state.tableFontSize}}>\n            <table id=\"table\">\n            <tr>\n            <th>section</th>\n            <th>title</th>\n            <th>credit</th>\n            <th>instructor</th>\n            <th>status</th>\n          </tr>\n          <tr>\n            <td>000.001</td>\n            <td>Daddy Master Class (th edition)</td>\n            <td>3</td>\n            <td>nahee.app</td>\n            <td>closed</td>\n          </tr>\n          <tr>\n            <td>000.002</td>\n            <td>Daddy Master Class (th edition)</td>\n            <td>3</td>\n            <td>nahee.app</td>\n            <td>waitlist</td>\n          </tr>\n          <tr onClick={this.changeRowColor} style={{background:this.state.rowColor, color:this.state.rowTextColor}}>\n            <td>000.003</td>\n            <td>Daddy Master Class (th edition)</td>\n            <td>3</td>\n            <td>nahee.app</td>\n            <td>open</td>\n          </tr>\n          <tr onClick={this.changeRowColor2} style={{display:this.state.showTableRow,background:this.state.rowColor2, color:this.state.rowTextColor2}}>\n            <td>000.004</td>\n            <td>Daddy Master Class (th edition)</td>\n            <td>3</td>\n            <td>nahee.app</td>\n            <td>open</td>\n          </tr>\n          <tr onClick={this.changeRowColor3} style={{display:this.state.showTableRow,background:this.state.rowColor3, color:this.state.rowTextColor3}}>\n            <td>000.005</td>\n            <td>Daddy Master Class (th edition)</td>\n            <td>3</td>\n            <td>nahee.app</td>\n            <td>open</td>\n          </tr>\n          <tr onClick={this.changeRowColor4} style={{display:this.state.showTableRow,background:this.state.rowColor4, color:this.state.rowTextColor4}}>\n            <td>000.006</td>\n            <td>Daddy Master Class (th edition)</td>\n            <td>3</td>\n            <td>nahee.app</td>\n            <td>open</td>\n          </tr>\n        </table>\n\t</div>\n\t\t<ScreenWidth mom={this.test.bind(this)} son={this.handleZIndex.bind(this)}>\n        {(width) => <div className=\"forForm\" style={{zIndex:this.state.formZIndex}}>{width}</div>}\n      </ScreenWidth>\n      <div className=\"classDescription\" style={{display:this.state.showDesc, top:this.state.seTop}}>\n      <br/>\n      \n      <p className=\"reveal\"><span className=\"descSpan\">   2026     </span></p>\n\n <p className=\"reveal\"><span className=\"descSpan\">     .</span></p>\n\n <p className=\"reveal\"><span className=\"descSpan\">        :</span></p>\n\n <p className=\"reveal\"><span className=\"descSpan\">              \n\n    ?</span></p>\n\n<p className=\"reveal\"><span className=\"descSpan\">  2020.12.24 ~ 12.31</span></p> \n \n      </div>\n      <div className=\"arrowForButton\" style={{display:this.state.showDesc}}>\n      <svg class=\"hidden\" viewBox=\"0 0 200 1000\" width=\"200\" height=\"1000\">\n\t\t\t<defs>\n\t\t\t\t<filter id=\"distortionFilter\">\n\t\t\t\t\t<feTurbulence type=\"fractalNoise\" baseFrequency=\"0.03 0.01\" numOctaves=\"2\" seed=\"2\" stitchTiles=\"stitch\" x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\" result=\"noise\"/>\n\t\t\t\t\t<feDisplacementMap in=\"SourceGraphic\" in2=\"noise\" scale=\"26\" data-min-scale=\"0\" data-max-scale=\"100\" xChannelSelector=\"R\" yChannelSelector=\"B\" x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\" filterUnits=\"userSpaceOnUse\"/>\n\t\t\t\t</filter>\n\n\t\t\t</defs>\n\t\t</svg>\n      <svg class=\"svgtext svgtext--2\" data-filter-type=\"distortion\" width=\"120%\" viewBox=\"0 0 200 1000\">\n\t\t\t<path id=\"text-curve2\" d=\"M52.12,14.77C159.65,195.17,185.07,417,149.35,624c-5.21,30.18-11.65,60.16-20.31,89.53-8.52,28.91-19.14,57.13-29.76,85.33l-68.55,182\" fill=\"none\"/>\n\t\t\t<text filter=\"url(#distortionFilter)\" fill=\"rgba(255,255,255,.4)\">\n\t\t\t\t<textPath href=\"#text-curve2\" y=\"36\" style={{overflow:\"visible\"}}>\n\t\t\t\t{this.state.mymyText}\n\t\t\t\t</textPath>\n\t\t\t</text>\n\t\t</svg>\n      </div>\n\n\t</div>\n    <div className={`logoContainer ${this.state.logoOpacity}`} style={{background:\"black\",overflowY:\"hidden\",position:\"fixed\",top:\"0px\",left:\"0px\",width:this.state.wWidth,height:this.state.wHeight}}>\n\n    <div className=\"logoContainerInner\">\n    <img src=\"drd_logo_s.png\" className={`drdLogo ${this.state.drdLogo}`} />\n    </div>\n    \n      </div>\n\n\n    </div>\n  }\n}\n\nconst PlacentaNoq = withOrientationChange(PlacentaNoClass)\n\nexport default PlacentaNoq \n\n// export default PlacentaNo;\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { DDSLoader } from 'three/examples/jsm/loaders/DDSLoader.js';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader.js';\nimport { Curves } from 'three/examples/jsm/curves/CurveExtras.js';\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module.js';\nimport { SubdivisionModifier } from 'three/examples/jsm/modifiers/SubdivisionModifier.js';\nimport { Detector } from 'three/examples/jsm/WebGL.js';\nimport decorateMaterialWithPerMapTransforms from '../js/SpecGlossMultiUVInstanceExample.js';\nimport decorateMaterialWithSpecGloss from '../js/SpecGlossMultiUVInstanceExample3.js';\nimport decorateMaterialWithSimpleInstancing from '../js/SpecGlossMultiUVInstanceExample2.js';\nimport decorateMaterialWithSimpleInstancing2 from '../js/SpecGlossMultiUVInstanceExample4.js';\nimport { NURBSCurve } from 'three/examples/jsm/curves/NURBSCurve.js';\nimport { Interaction } from 'three.interaction';\nimport { ScreenWidth } from './ScreenWidth';\n\nimport * as Nodes from 'three/examples/jsm/nodes/Nodes.js';\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\n\nimport {\n  isBrowser,\n  isMobile,\n  withOrientationChange\n} from \"react-device-detect\";\n\n\nvar INSTANCES = 128;\nvar frequency = 32;\nvar gltfScale = 1500;\nvar firstTime = true;\n\nconst style = {\n  // height: 5400 // we can control scene size by setting container dimensions\n};\n\nconst projectTitles =[\"spermtank\",\"naheerun\",\"ospapax\",\"oogenesis\",\"what\",\"cybersecurity\",\"naheerun\"];\nconst projectTitles2 =[\"would u b my sperm tank?\",\".  .\",\"ospapax\",\"oo-genesis\",\"what is daddy residency?\",\"cybersecurity4uterus\",\".  .\"];\nconst projectLinks =\n[\"https://www.youtube.com/embed/IDKXWiDn3ZU\",\n\"https://www.youtube.com/embed/3aWj_jF-htA\",\n\"https://www.youtube.com/embed/L2EGFM_asxo\",\n\"https://www.youtube.com/embed/IJ23D1M_Hp8\",\n\"https://www.youtube.com/embed/efzO_lpcyY4\",\n\"https://www.youtube.com/embed/-d-agXX5Z1I\",\n\"https://www.youtube.com/embed/3aWj_jF-htA\"];\n\nvar container, stats;\nvar camera, scene, renderer;\nvar tableShow = false;\nvar creditShow = false;\nvar marqueeHovered = false;\nvar marqueeHovered2 = false;\nvar focusCounter = 0;\nvar randDic = [\"\",\"\",\"\",\"+\",\"*\",\"\"];\nvar randDic2 = [\"\",\"\",\"\",\"\",\"\",\"\"];\nvar arrowSymbols = \"\";\n// var mobOrDesk = false;\n\nclass PlacentaNo extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tvar wWidth = window.innerWidth + \"px\";\n\t\tvar wHeight = window.innerHeight + \"px\";\n\t\tvar tableHeight = window.innerHeight - 150;\n\t\tconsole.log(tableHeight+\"px\");\n\t\tvar marqueeDisplay = \"none\";\n\t\tif (window.innerWidth>1200){\n\t\t\tmarqueeDisplay = \"inherit\"\n\t\t}\n\t\tvar marqueeFontSize = \"\";\n\t\t\n\t\tvar modalTop = \"0px\";\n\t    var modalLeft = \"0px\";\n\t    var petitDisplay =\"none\";\n\t    var titleWidth = wHeight;\n\t    var titleHeight = wHeight;\n\t    var titlePointerEvents = \"none\";\n\t    var titleImageWidth = window.innerHeight;\n\t    var titleImageDisplay = \"none\";\n\t    var showTableRow = \"table-row\";\n\t    var seTop = \"\";\n\t    var secondRnd = \"\";\n\t    var thirdRnd = \"\";\n\t    var fourthRnd = \"\";\n\t    \n\t    if (isMobile){\n\t    \tmodalTop = (window.innerHeight -window.innerWidth)*0.5 + \"px\";\n\t    \tmodalLeft = \"0px\";\n\t    \tpetitDisplay = \"inherit\";\n\t    \ttitleWidth = wWidth;\n\t    \ttitleHeight = wWidth;\n\t    \ttitlePointerEvents = \"inherit\";\n\t    \ttitleImageWidth = window.innerWidth;\n\t    \ttitleImageDisplay = \"inherit\";\n\t    \tif ((window.innerWidth/window.innerHeight)>1){\n\t\t\t\tmarqueeFontSize = \"32px\";\n\t\t\t}\n\n\t    }\n\t    \n\n\t    \n\t    this.state = {\n\t      display:\"\",\n\t      uterusImg: \"/textures/mat/cybersecurity_mat.png\",\n\t      projectTitle: \"nahee.app run daddy.app\",\n\t      projectLink:\"https://www.youtube.com/embed/3aWj_jF-htA\",\n\t      wWidth: wWidth,\n\t      wHeight: wHeight,\n\t      logoOpacity:\"\",\n\t      drdLogo:\"\",\n\t      modalTop:modalTop,\n\t      modalLeft:modalLeft,\n\t      petitDisplay:petitDisplay,\n\t      tableHeight: tableHeight +\"px\",\n\t      tableDisplay: \"none\",\n\t      marqueeDisplay: marqueeDisplay,\n\t      formZIndex:30000,\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\",\n\t      marqueeTxt:\"th Daddy Master Class  Try\",\n\t      marqueePointer:\"pointer\",\n\t      marqueeHover:\"\",\n\t      marqueeHover2:\"\",\n\t      focus:0,\n\t      titleWidth: titleWidth,\n\t      titleHeight: titleHeight,\n\t      titlePointerEvents: titlePointerEvents,\n\t      titleImageWidth: titleImageWidth,\n\t      titleImageDisplay: titleImageDisplay,\n\t      showTableRow: showTableRow,\n\t      seTop:seTop,\n\t      secondRnd:secondRnd,\n\t      thirdRnd:thirdRnd,\n\t      fourthRnd:fourthRnd,\n\t      creditDisplay:\"none\",\n\t      mymyText:\"\",\n\t      showDesc:\"inherit\",\n\t      tableFontSize:\"\",\n\t      marqueeFontSize:marqueeFontSize\n\t    };\n    \n\t}\n  componentDidMount() {\n    this.sceneSetup();\n    var myThis = this;\n    // if(isMobile){\n    // \tthis.updateFocus();\n\t   //  this.interval = setInterval(() => myThis.updateFocus(), 2000);\n    // }\n    \t    \t\n    \n    window.addEventListener(\"resize\", this.handleWindowResize);\n    // window.addEventListener(\"orientationchange\", this.handleWindowResize, false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    // window.removeEventListener(\"orientationchange\", this.handleWindowResize);\n    window.cancelAnimationFrame(this.requestID);\n    if(isMobile){\n    \tclearInterval(this.interval);\n    }\n    // this.controls.dispose();\n  }\n\n  updateRnd = () =>{\n  \tvar newSecondRndTxt = \"\";\n  \tvar newThirdRndTxt = \"\";\n  \tvar newFourthRndTxt = \"\";\n  \tvar randInt = Math.floor(Math.random() * Math.floor(6));\n  \tfor (var i = 0; i < randInt+1; i++) {\n  \t\tvar randInt2 = Math.floor(Math.random() * Math.floor(6));\n  \t\tnewSecondRndTxt += randDic[randInt2];\n  \t}\n  \tvar randInt_ = Math.floor(Math.random() * Math.floor(4));\n  \tfor (var i = 0; i < randInt_+1; i++) {\n  \t\tvar randInt3 = Math.floor(Math.random() * Math.floor(6));\n  \t\tnewThirdRndTxt += randDic[randInt3];\n  \t}\n\n\tvar randInt__ = Math.floor(Math.random() * Math.floor(3));\n  \tfor (var i = 0; i < randInt__+1; i++) {\n  \t\tvar randInt4 = Math.floor(Math.random() * Math.floor(6));\n  \t\tnewFourthRndTxt += randDic[randInt4];\n  \t}\n\n  \tthis.setState({\n\t      secondRnd:newSecondRndTxt,\n\t      thirdRnd:newThirdRndTxt,\n\t      fourthRnd:newFourthRndTxt\n\t    });\n    }\n  updateArrow= () => {\n  \tvar symbolLength = 14;\n  \tif(isMobile){\n\t\t\n\t\tif(window.innerHeight>800){\n\t\t\tsymbolLength = 18;\n\t\t}else if((window.innerHeight<800)&&(window.innerHeight>700)){\n\t\t\tsymbolLength = 16;\n\t\t}else if((window.innerHeight<700)&&(window.innerHeight>600)){\n\t\t\tsymbolLength = 13;\n\t\t}else{\n\t\t\tsymbolLength = 12;\n\t\t}\n  \t}\n  \tif (arrowSymbols.length<symbolLength-1){\n  \t\tarrowSymbols += \"\";\n  \t\t// \n  \t\tthis.setState({\n\t      mymyText:arrowSymbols\n\t    });\n  \t}else if (arrowSymbols.length==symbolLength-1){\n  \t\tvar randInt = Math.floor(Math.random() * Math.floor(6));\n  \t\tarrowSymbols += randDic2[randInt];\n  \t\tthis.setState({\n\t      mymyText:arrowSymbols\n\t    });\n  \t}else if (arrowSymbols.length==symbolLength){\n  \t\tarrowSymbols = \"\";\n  \t\tthis.setState({\n\t      mymyText:arrowSymbols\n\t    });\n  \t}\n  \t// else if (arrowSymbols.length==12){\n  \t// \tarrowSymbols += \"\"\n  \t// \tthis.setState({\n\t  //     mymyText:arrowSymbols\n\t  //   });\n  \t// }\n  \t\n  \t\n  }\n\n  updateFocus= () => {\n  \t// console.log(\"this.state.focus\",this.state.focus);\n\n  \t//  this.setState({ focus: Math.floor(Math.random() * Math.floor(3)) })\n  \t // var randInt = Math.floor(Math.random() * Math.floor(3))\n  \t var counterReminder = focusCounter % 7;\n  \t var tf = false;\n  \t if (counterReminder > 4){\n  \t \ttf = true;\n  \t }\n  \t // if (focusCounter!=0){\n  \t \tthis.focusEvent2(this.meshArr[counterReminder], tf);\n  \t // }\n  \t focusCounter += 1;\n  \t counterReminder = focusCounter % 7;\n  \t if (counterReminder > 4){\n  \t \ttf = true;\n  \t }\n  \t this.focusEvent(this.meshArr[counterReminder], tf, counterReminder);\n  }\n\n\n  sceneSetup = () => {\n    // get container dimensions and use them for scene sizing\n\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n\n    var elmnt = document.getElementById(\"marquee\");\n    if (elmnt!= undefined){\n    \tvar tableHeight = height - (elmnt.offsetHeight*2) - 6;\n    var tableTop = elmnt.offsetHeight + 6;\n    this.setState({\n\t      tableHeight: tableHeight + \"px\",\n\t      tableTop: tableTop +\"px\"\n\t    });\n    }\n    \n\t// console.log(\"elmnt.offsetHeight\",elmnt.offsetHeight);\n\n   \t// if (width >= height){\n   \t// \tmobOrDesk = false;\n   \t// }else{\n   \t// \tmobOrDesk = true;\n   \t// }\n\n   \t// if (isMobile){\n   \t// \tmobOrDesk = true;\n   \t// }else if(isBrowser){\n   \t// \tmobOrDesk = false;\n   \t// }\n\n    if (isMobile){\n    \tINSTANCES = 64;\n    \tgltfScale = 1000;\n    }else if(isBrowser){\n    \tINSTANCES = 128;\n    \tgltfScale = 1500;\n    }\n\n    this.scene = new THREE.Scene();\n    //dummy scene\n\t// this.intersectsScene = new THREE.Scene();\n\n\tthis.mouseX = 0;\n\tthis.mouseY = 0;\n\n\tthis.mouse = new THREE.Vector2();\n\n\tthis.targetX = 0;\n\tthis.targetY = 0;\n\n    this.clock = new THREE.Clock();\n\n\tthis.camera = new THREE.PerspectiveCamera( 27, window.innerWidth / window.innerHeight, 1, 10000 );\n\tthis.camera.position.z = 1200;\n\n   \tvar light = new THREE.DirectionalLight( 0xffffff,4 );\n\tlight.position.set( 100, 260, 160 );\n\n\tthis.scene.add(light)\n\n\tvar ambient = new THREE.AmbientLight( 0x222222 );\n\tthis.scene.add( ambient );\n\t\n\n    this.renderer = new THREE.WebGLRenderer();\n    // { alpha: true }\n    // this.renderer.setClearColor( 0x000000, 0 ); \n    this.renderer.physicallyCorrectLights = true;\n    // this.renderer.gammaOutput = true;\n   \tthis.renderer.outputEncoding = THREE.sRGBEncoding;\n    // this.renderer.shadowMap.enabled = true;\n    \n    this.renderer.setPixelRatio( window.devicePixelRatio );\n\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\n\t// container.appendChild( renderer.domElement );\n\t// this.interaction = new Interaction(this.renderer, this.intersectsScene, this.camera);\n\t//renderer.toneMapping = ReinhardToneMapping;\n\n\tthis.stats = new Stats();\n\n\tthis.offsetAttArr = [];\n\tthis.scaleAttArr = [];\n\n\tconst matArraySize = INSTANCES * 4\n\tthis.matrixArray = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray = [];\n\n\tthis.matrixArray2 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray2 = [];\n\n\tthis.matrixArray3 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray3 = [];\n\n\tthis.matrixArray4 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray4 = [];\n\n\tthis.matrixArray5 = [\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t\tnew Float32Array(matArraySize),\n\t]\n\tthis.matrixAttributeArray5 = [];\n\t\n\t\n\n\tif (isMobile){\n    \tthis.initInstanceAttributesExtended(400,200,200,0,this.matrixArray,this.matrixAttributeArray,this.mesh, 1);\n\t\t// for gltf1\n\t\tthis.initInstanceAttributesExtended(400,120,200,50,this.matrixArray2,this.matrixAttributeArray2,this.mesh2, 2);\n\n\t\tthis.initInstanceAttributesExtended(300,100,320,100,this.matrixArray3,this.matrixAttributeArray3,this.mesh3, 3);\n\t\t// for gltf2\n\t\tthis.initInstanceAttributesExtended(400,120,50,120,this.matrixArray4,this.matrixAttributeArray4,this.mesh4, 4);\n    }else if(isBrowser){\n    \tthis.initInstanceAttributesExtended(300,150,150,0,this.matrixArray,this.matrixAttributeArray,this.mesh, 1);\n\t\t// for gltf1\n\t\tthis.initInstanceAttributesExtended(500,100,300,300,this.matrixArray2,this.matrixAttributeArray2,this.mesh2, 2);\n\n\t\tthis.initInstanceAttributesExtended(600,200,200,200,this.matrixArray3,this.matrixAttributeArray3,this.mesh3, 3);\n\t\t// for gltf2\n\t\tthis.initInstanceAttributesExtended(500,0,250,150,this.matrixArray4,this.matrixAttributeArray4,this.mesh4, 4);\n    }\n\n\tthis.initTexture();\n\tthis.initBall();\n\n\t// this.onChangeGuiMaterial(this.material);\n\tthis.loadGLTF();\n\tthis.loadGLTF2();\n\tthis.startAnimationLoop();\n\n    this.el.appendChild(this.renderer.domElement); // mount using React ref\n\n    document.addEventListener( 'mousemove', this.onDocumentMouseMove, false );\n  };\n\n  loadGLTF = () => {\n\n  \tvar myThis = this;\n\n\tthis.loader = new GLTFLoader();\n\tconst dracoLoader = new DRACOLoader();\n\tdracoLoader.setDecoderPath( 'three/examples/js/libs/draco/gltf/' );\n\tthis.loader.setDRACOLoader(dracoLoader );\n\tconst ddsLoader = new DDSLoader();\n\tthis.loader.setDDSLoader(ddsLoader );\n\n\tvar loadStartTime = performance.now();\n\tthis.loader.load( 'textures/BoomBoxLight.gltf', function( data ) {\n\n\t\tmyThis.gltf = data;\n\n\t\tvar object = myThis.gltf.scene;\n\n\t\tconsole.info( 'Load time: ' + ( performance.now() - loadStartTime ).toFixed( 2 ) + ' ms.' );\n\n\t\tobject.traverse( function( node ) {\n\n\t\t\tif ( node.material && ( node.material.isMeshStandardMaterial ||\n\t\t\t\t ( node.material.isShaderMaterial && node.material.envMap !== undefined ) ) ) {\n\n\t\t\t\tnode.material.envMap = myThis.envMap;\n\t\t\t\tnode.material.needsUpdate = true;\n\t\t\t}\n\n\t\t} );\n\n\t\tobject.traverse( function ( node ) {\n\n\t\t\t// if ( node.isMesh || node.isLight ) node.castShadow = true;\n\n\t\t} );\n\t\tobject.rotation.y -= Math.PI;\n\t\tmyThis.scene.add( object );\n\t\t\n\n\t\tvar scale = gltfScale;\n\t\tmyThis.meshGLTF = object.children[0]\n\t\tmyThis.meshGLTF.frustumCulled = false\n\t\t// myThis.meshGLTF.visible = guiData.currentMesh === 'gltf'\n\t\tmyThis.meshGLTF.geometry.scale(scale,scale,scale)\n\n\t\tmyThis.materialGLTF = myThis.meshGLTF.material\n\t\tdecorateMaterialWithPerMapTransforms(myThis.materialGLTF)\n\t\t// myThis.applyInstancingToMesh2(myThis.meshGLTF)\n\t\tmyThis.applyInstancingToMeshExtended(myThis.meshGLTF,2)\n\t\tmyThis.meshArr[5] = myThis.meshGLTF;\n\t\t// myThis.meshArr[5].visible = false;\n\n\t\t// myThis.applyIndecisToInstancedMesh(myThis.meshGLTF)\n\n\t}, undefined, function ( error ) {\n\n\t\tconsole.error( error );\n\n\t} );\n\n}\n\n  loadGLTF2 = () => {\n\n  \tvar myThis = this;\n\n\tthis.loader = new GLTFLoader();\n\tconst dracoLoader = new DRACOLoader();\n\tdracoLoader.setDecoderPath( 'three/examples/js/libs/draco/gltf/' );\n\tthis.loader.setDRACOLoader(dracoLoader );\n\tconst ddsLoader = new DDSLoader();\n\tthis.loader.setDDSLoader(ddsLoader );\n\n\tvar loadStartTime = performance.now();\n\tthis.loader.load( 'textures/hey/BoomBoxLight.gltf', function( data ) {\n\n\t\tmyThis.gltf2 = data;\n\n\t\tvar object = myThis.gltf2.scene;\n\n\t\t// console.info( 'Load time: ' + ( performance.now() - loadStartTime ).toFixed( 2 ) + ' ms.' );\n\n\t\tobject.traverse( function( node ) {\n\n\t\t\tif ( node.material && ( node.material.isMeshStandardMaterial ||\n\t\t\t\t ( node.material.isShaderMaterial && node.material.envMap !== undefined ) ) ) {\n\n\t\t\t\tnode.material.envMap = myThis.envMap;\n\t\t\t\tnode.material.needsUpdate = true;\n\t\t\t}\n\n\t\t} );\n\n\t\t\n\t\tobject.rotation.y -= Math.PI;\n\t\tmyThis.scene.add( object );\n\t\t// object.position.x = 500;\n\n\t\tvar scale = gltfScale;\n\t\tmyThis.meshGLTF2 = object.children[0]\n\t\tmyThis.meshGLTF2.frustumCulled = false\n\t\tmyThis.meshGLTF2.geometry.scale(scale,scale,scale)\n\n\t\tmyThis.meshArr[6] = myThis.meshGLTF2;\n\t\t// myThis.meshArr[6].visible = false;\n\t\tmyThis.materialGLTF2 = myThis.meshGLTF2.material\n\t\tdecorateMaterialWithPerMapTransforms(myThis.materialGLTF2)\n\t\tmyThis.applyInstancingToMeshExtended(myThis.meshGLTF2, 4)\n\n\t\tmyThis.setState({\n\t      logoOpacity:\"logoAnimation\",\n\t      drdLogo:\"drdLogoAnimation\"\n\t    });\n\t    myThis.interval = setInterval(() => myThis.updateRnd(), 200);\n\t\t// myThis.applyInstancingToMesh4(myThis.meshGLTF2)\n\t\t// myThis.applyIndecisToInstancedMesh(myThis.meshGLTF)\n\n\t}, undefined, function ( error ) {\n\n\t\tconsole.error( error );\n\n\t} );\n\n}\n\n\tinitTexture = () => {\n\n\t\tvar myThis = this;\n\n\t\tthis.texture = new THREE.TextureLoader().load( 'textures/mat/naheerun_mat.png' )\n\t\tthis.texture.wrapS = this.texture.wrapT = THREE.RepeatWrapping\n\t\tthis.texture.name = \"texture\"\n\n\t\tthis.texture3 = new THREE.TextureLoader().load( 'textures/mat/ospapax_mat.png' )\n\t\tthis.texture3.wrapS = this.texture3.wrapT = THREE.RepeatWrapping\n\t\tthis.texture3.name = \"texture3\"\n\n\t\tthis.texture4 = new THREE.TextureLoader().load( 'textures/mat/oogenesis_mat.png' )\n\t\tthis.texture4.wrapS = this.texture4.wrapT = THREE.RepeatWrapping\n\t\tthis.texture4.name = \"texture4\"\n\n\t\tthis.texture5 = new THREE.TextureLoader().load( 'textures/mat/what_mat.png' )\n\t\tthis.texture5.wrapS = this.texture5.wrapT = THREE.RepeatWrapping\n\t\tthis.texture5.name = \"texture5\"\n\n\t\tthis.texture6 = new THREE.TextureLoader().load( 'textures/mat/spermtank_mat.png' )\n\t\tthis.texture6.wrapS = this.texture6.wrapT = THREE.RepeatWrapping\n\t\tthis.texture6.name = \"texture6\"\n\n\t\tthis.envMap = new THREE.TextureLoader().load( 'textures/pp_new_2.jpg', function ( texture ) {\n\n\t\t\ttexture.mapping = THREE.EquirectangularReflectionMapping;\n\t\t\ttexture.encoding = THREE.sRGBEncoding;\n\t\t\tif ( myThis.mesh ) myThis.material.needsUpdate = true;\n\t\t\tif ( myThis.meshGLTF ) myThis.materialGLTF.needsUpdate = true;\n\t\t\tif ( myThis.meshGLTF2 ) myThis.materialGLTF2.needsUpdate = true;\n\n\t\t} );\n\n\t\tthis.envMap.name = \"envMap\"\n\t}\n\n\tinitBall = () => {\n\n\t\tthis.material = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0xff0000,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture6,\n\t\t\t})\n\t\t)\n\t\tthis.material2 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0x00ff00,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture,\n\t\t\t})\n\t\t)\n\t\tthis.material3 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0x0000ff,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture3,\n\t\t\t})\n\t\t)\n\t\tthis.material4 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0xffff00,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture4,\n\t\t\t})\n\t\t)\n\t\tthis.material5 = decorateMaterialWithSpecGloss(\n\t\t\tnew THREE.MeshStandardMaterial({\n\t\t\t\t// color: 0xff00ff,\n\t\t\t\t// color: 0x222222,\n\t\t\t\tenvMap: this.envMap,\n\t\t\t\tmap: this.texture5,\n\t\t\t})\n\t\t)\n\n\t\tdecorateMaterialWithPerMapTransforms(this.material)\n\n\n\t\tthis.mesh = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material)\n\t\tthis.mesh2 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material2)\n\t\tthis.mesh3 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material3)\n\t\tthis.mesh4 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material4)\n\t\tthis.mesh5 = new THREE.Mesh(new THREE.SphereBufferGeometry(8), this.material5)\n\t\t// this.mesh.visible = false;\n\t\t// this.mesh2.visible = false;\n\t\t// this.mesh3.visible = false;\n\t\t// this.mesh4.visible = false;\n\t\t// this.mesh5.visible = false;\n\t\tthis.meshArr = [this.mesh, this.mesh2, this.mesh3, this.mesh4,this.mesh5];\n\n\t\tthis.mesh.material.needsUpdate = true;\n\t\tthis.mesh2.material.needsUpdate = true;\n\t\tthis.mesh3.material.needsUpdate = true;\n\t\tthis.mesh4.material.needsUpdate = true;\n\t\tthis.mesh5.material.needsUpdate = true;\n\t\tthis.scene.add(this.mesh);\n\t\t// this.mesh2.rotation.y -= Math.PI;\n\t\tthis.scene.add(this.mesh2);\n\t\t// this.mesh3.rotation.z -= Math.PI;\n\t\tthis.scene.add(this.mesh3);\n\t\tthis.scene.add(this.mesh4);\n\t\tthis.mesh5.rotation.y -= Math.PI;\n\t\tthis.scene.add(this.mesh5);\n\n\n\t\tthis.material.glossinessMap = this.texture \n\n\t\tthis.applyInstancingToMeshExtended(this.mesh,1)\n\t\tthis.applyInstancingToMeshExtended(this.mesh2,2)\n\t\tthis.applyInstancingToMeshExtended(this.mesh3,3)\n\n\t\tthis.applyInstancingToMeshExtended(this.mesh4,4)\n\t\tthis.applyInstancingToMeshExtended(this.mesh5,3)\n\n\n\t}\n\n\n\tinitInstanceAttributesExtended = (max, minus,minus2,minus3, array, attArray, meshName, n) => {\n\t\t//create geometry attributes\n\t\t// NURBS curve\n\n\t\t\t\tconst nurbsControlPoints = [];\n\t\t\t\tconst nurbsKnots = [];\n\t\t\t\tconst nurbsDegree = 3;\n\n\t\t\t\tfor ( let i = 0; i <= nurbsDegree; i ++ ) {\n\n\t\t\t\t\tnurbsKnots.push( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, j = 10; i < j; i ++ ) {\n\n\t\t\t\t\tnurbsControlPoints.push(\n\t\t\t\t\t\tnew THREE.Vector4(\n\t\t\t\t\t\t\tMath.random() * max - minus,\n\t\t\t\t\t\t\tMath.random() * max - minus2,\n\t\t\t\t\t\t\tMath.random() * max - minus3,\n\t\t\t\t\t\t\t-100 // weight of control point: higher means stronger attraction\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tconst knot = ( i + 1 ) / ( j - nurbsDegree );\n\t\t\t\t\tnurbsKnots.push( THREE.MathUtils.clamp( knot, 0, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t\tconst nurbsCurve = new NURBSCurve( nurbsDegree, nurbsKnots, nurbsControlPoints );\n\n\t\t// var knot = new Curves.TorusKnot( 60 );\n\t\tvar positions = nurbsCurve.getSpacedPoints( INSTANCES );\n\n\t\tvar offsets = new Float32Array( INSTANCES * 3 ); // xyz\n\t\tvar scales = new Float32Array( INSTANCES * 1 ); // s\n\t\t// var colors = new Float32Array( INSTANCES * 3 ); \n\n\t\tvar myThis = this;\n\n\t\tvar dummy2 = [];\n\t\tvar dummy4 = [];\n\t\tvar dummy3 = [];\n\n\t\tfor ( var i = 0, l = INSTANCES; i < l; i ++ ) {\n\n\t\t\tvar object = new THREE.Mesh(new THREE.SphereBufferGeometry(12)) \n\t\t\tvar object2;\n\n\t\t\tobject.userData.index = i //keep for mapping to attribute\n\n\t\t\tvar index = 3 * i;\n\n\t\t\t// per-instance position offset\n\t\t\toffsets[ index ] = positions[ i ].x;\n\t\t\toffsets[ index + 1 ] = positions[ i ].y;\n\t\t\toffsets[ index + 2 ] = positions[ i ].z;\n\n\t\t\tobject.position.x = positions[ i ].x;\n\t\t\tobject.position.y = positions[ i ].y;\n\t\t\tobject.position.z = positions[ i ].z;\n\n\t\t\t// per-instance scale variation\n\t\t\tscales[ i ] = 2 + 0.5 * Math.sin( frequency * Math.PI * i / INSTANCES );\n\t\t\tobject.scale.x = scales[ i ];\n\t\t\tobject.scale.y = scales[ i ];\n\t\t\tobject.scale.z = scales[ i ];\n\n\t\t// \tthis.intersectsScene.add( object );\n\t\t\t\n\t\t// \tobject.cursor = \"pointer\";\n\n\t\t// \tobject.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[n-1], n-1);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t\t\n\t\t// \t// console.log(\"mouseover\",this.mesh);\n\t\t// \tobject.on('mouseover',\n\t\t// \t\tfunction(ev) {\n\t\t// \t\t myThis.goEvent(ev, myThis.meshArr[n-1], false, n-1);\n\t\t// }\n\n\t\t// \t);\n\t\t// \tobject.on('mouseout', function(ev) {\n\t\t// \t\t myThis.goEvent2(ev, myThis.meshArr[n-1], false);\n\t\t// });\n\n\t\t// \tif (n==2){\n\t\t// \t\t//cybersecurity4uterus\n\t\t// \t\tobject2 = object.clone();\n\n\t\t// \t\tobject2.position.x *= -1.0;\n\t\t// \t\tobject2.position.z *= -1.0;\n\n\t\t// \t\t// this.intersectsScene.children[INSTANCES*5+i] = object2 ;\n\t\t// \t\tdummy2.push(object2);\n\t\t// \t\tobject2.cursor = \"pointer\";\n\n\t\t// \t\tobject2.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[5],5);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseover',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEvent(ev, myThis.meshArr[5],true, 5);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseout', function(ev) {\n\t\t// \t\t\t myThis.goEvent2(ev, myThis.meshArr[5],true);\n\t\t// \t});\n\t\t// \t\t// object2.updateMatrixWorld()\n\t\t// \t}\n\t\t// \tif (n==4){\n\t\t// \t\t//nahee run daddy\n\t\t// \t\tobject2 = object.clone();\n\n\t\t// \t\tobject2.position.x *= -1.0;\n\t\t// \t\tobject2.position.z *= -1.0;\n\t\t// \t\tdummy4.push(object2);\n\t\t// \t\t// this.intersectsScene.add( object2 );\n\t\t// \t\t// this.intersectsScene.children[INSTANCES*6+i] = object2 ;\n\t\t// \t\tobject2.cursor = \"pointer\";\n\t\t// \t\tobject2.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[6],6);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseover',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEvent(ev, myThis.meshArr[6],true, 6);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseout', function(ev) {\n\t\t// \t\t\t myThis.goEvent2(ev, myThis.meshArr[6],true);\n\t\t// \t});\n\t\t// \t\t// object2.updateMatrixWorld()\n\t\t// \t}\n\t\t// \tif (n==3){\n\t\t// \t\t//What is daddy residency?\n\t\t// \t\tobject2 = object.clone();\n\n\t\t// \t\tobject2.position.x *= -1.0;\n\t\t// \t\tobject2.position.z *= -1.0;\n\t\t// \t\tdummy3.push(object2);\n\t\t// \t\t// this.intersectsScene.add( object2 );\n\t\t// \t\t// this.intersectsScene.children[INSTANCES*4+i] = object2;\n\n\t\t// \t\tobject2.cursor = \"pointer\";\n\t\t// \t\tobject2.on('click',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEventClicked(ev, myThis.meshArr[4],4);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseover',\n\t\t// \t\t\tfunction(ev) {\n\t\t// \t\t\t myThis.goEvent(ev, myThis.meshArr[4], false, 4);\n\t\t// \t}\n\n\t\t// \t\t);\n\t\t// \t\tobject2.on('mouseout', function(ev) {\n\t\t// \t\t\t myThis.goEvent2(ev, myThis.meshArr[4], false);\n\t\t// \t});\n\t\t// \t\t// object2.updateMatrixWorld()\n\t\t// \t}\n\t\t\t\n\n\t\t// \tobject.updateMatrixWorld()\n\t\t\t\t\n\t\t// }\n\t\t// // console.log(\"dummy3\",dummy3.length);\n\t\t// if (dummy3.length > 0){\n\t\t// \tvar theLimit = 128;\n\t\t// \tif(isMobile){\n\t\t// \t\ttheLimit = 64;\n\t\t// \t}\n\t\t// \tfor (var i = 0; i <theLimit; i++) {\n\t\t// \t\tthis.intersectsScene.add(dummy3[i]);\n\t\t// \t}\n\t\t\t\n\t\t// }\n\t\t// if (dummy2.length > 0){\n\t\t// \tvar theLimit = 128;\n\t\t// \tif(isMobile){\n\t\t// \t\ttheLimit = 64;\n\t\t// \t}\n\t\t// \tfor (var i = 0; i <theLimit; i++) {\n\t\t// \t\tthis.intersectsScene.add(dummy2[i]);\n\t\t// \t}\n\t\t// }\n\t\t// if (dummy4.length > 0){\n\t\t// \tvar theLimit = 128;\n\t\t// \tif(isMobile){\n\t\t// \t\ttheLimit = 64;\n\t\t// \t}\n\t\t// \tfor (var i = 0; i <theLimit; i++) {\n\t\t// \t\tthis.intersectsScene.add(dummy4[i]);\n\t\t// \t}\n\t\t}\n\t\t\n\t\t// // this.intersectsScene.add( new THREE.Mesh(new THREE.SphereBufferGeometry(100), this.material) );\n\n\t\t// this.intersectsScene.updateMatrixWorld(true);\n\n\t\t// this.instanceColorAttribute2 = new THREE.InstancedBufferAttribute( colors, 3 )\n\t\tthis.instanceOffsetAttribute2 = new THREE.InstancedBufferAttribute( offsets, 3 )\n\t\tthis.instanceScaleAttribute2 = new THREE.InstancedBufferAttribute( scales, 1 )\n\n\t\t// this.colorAttArr[n-1] = this.instanceColorAttribute2;\n\t\tthis.offsetAttArr[n-1] = this.instanceOffsetAttribute2;\n\t\tthis.scaleAttArr[n-1] = this.instanceScaleAttribute2;\n\t}\n\n\n\tapplyInstancingToMeshExtended = (mesh,n) => {\n\t\tvar indecis = new Float32Array( INSTANCES ); \n\n\t\tfor ( var i = 0, l = INSTANCES; i < l; i ++ ) {\n\t\t\tindecis[i] = i / INSTANCES\n\t\t}\n\n\t\tmesh.geometry.addAttribute('aIndex', new THREE.InstancedBufferAttribute( indecis, 1 ) )\n\n\t\tvar uTime = { value: 0, type: 'float', stage: 'vertex' }\n\t\tmesh.material.userData.uTime = uTime\n\t\t// console.log(\"mesh.material.shaderUniforms.uTime\",mesh.material.shaderUniforms );\n\t\t//we expose it as a primitive\n\t\tObject.defineProperty(mesh.material, 'time', {\n\t\t\tget:()=>uTime.value,\n\t\t\tset:v=>uTime.value = v\n\t\t})\n\t\tvar uScale = { value: 1.5, type: 'float', stage: 'vertex' }\n\t\tmesh.material.userData.uScale = uScale\n\t\t// console.log(\"mesh.material.shaderUniforms.uTime\",mesh.material.shaderUniforms );\n\t\t//we expose it as a primitive\n\t\tObject.defineProperty(mesh.material, 'scale', {\n\t\t\tget:()=>uScale.value,\n\t\t\tset:v=>uScale.value = v\n\t\t})\n\n\t\tvar uSelected = { value: false, type: 'boolean' }\n\t\tObject.defineProperty(mesh, 'selected', {\n\t\t\tget:()=>uSelected.value,\n\t\t\tset:v=>uSelected.value = v\n\t\t})\n\n\t\tdecorateMaterialWithSimpleInstancing2(mesh.material)\n\t\tmesh.customDepthMaterial = decorateMaterialWithSimpleInstancing(\n\t\t\tnew THREE.MeshDepthMaterial({ depthPacking: THREE.RGBADepthPacking })\n\t\t)\n\t\tmesh.material.needsUpdate = true;\n\n\t\tmesh.geometry = new THREE.InstancedBufferGeometry().copy(mesh.geometry)\n\n\t\tmesh.geometry.instanceCount = INSTANCES\n\n\t\t// mesh.geometry.setAttribute( 'instanceColor', this.colorAttArr[n-1] );\n\t\tmesh.geometry.setAttribute( 'instanceOffset', this.offsetAttArr[n-1]);\n\t\tmesh.geometry.setAttribute( 'instanceScale', this.scaleAttArr[n-1] );\n\t\t\n\t\t// for shadow\n\t\tmesh.customDepthMaterial.userData = { uTime: mesh.material.userData.uTime }//wire this by reference, whenever prop updates material uniform this material updates too by referencing the same uniform\n\t\t// mesh.customDepthMaterial.userData = { uScale: mesh.material.userData.uScale }\n\t}\n\n  onDocumentMouseMove = ( event ) => {\n\n    var windowHalfX = window.innerWidth / 2;\n    var windowHalfY = window.innerHeight / 2;\n    var myThis2 = this;\n        myThis2.mouseX = ( event.clientX - windowHalfX ) / 2;\n        myThis2.mouseY = ( event.clientY - windowHalfY ) / 2;\n\n    myThis2.mouse.x = event.clientX;\n    myThis2.mouse.y = event.clientY;\n\n      }\n\n    focusEvent = (param, tf,n) => {\n\n    \t// this.interval = setInterval(() => myThis.updateFocus(), 2000);\n\t\tif (param){\n\n\t\t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1.9;\n\t\t\t\tparam.material.emissive.g = 1.8;\n\t\t\t\tparam.material.emissive.b = 1.9;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .9;\n\t\t\t\tparam.material.emissive.g = .8;\n\t\t\t\tparam.material.emissive.b = .9;\n\t\t\t\tparam.material.emissiveIntensity = .4;\n\t\t\t}\n\t\t\t// param.visible = false;\n\t\t}\n\t\tthis.setState({\n\t       projectTitle: projectTitles2[n],\n\t       // uterusImg: \"/textures/mat/\"+projectTitles[n] +\"_mat.png\"\n\t    });\n\t}\n focusEvent2 = (param, tf) => {\n \tif (param){\n \t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1;\n\t\t\t\tparam.material.emissive.g = 1;\n\t\t\t\tparam.material.emissive.b = 1;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .0;\n\t\t\t\tparam.material.emissive.g = .0;\n\t\t\t\tparam.material.emissive.b = .0;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}\n\t\t\t// param.visible = true;\n\t\t}\n\t\t\n\t}\n\n  goEvent = (ev, param, tf, n) => {\n\t\t// console.log(\"oh clicked\",param);\n\t\t// if (param){\n\n\t\t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1.9;\n\t\t\t\tparam.material.emissive.g = 1.8;\n\t\t\t\tparam.material.emissive.b = 1.9;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .9;\n\t\t\t\tparam.material.emissive.g = .8;\n\t\t\t\tparam.material.emissive.b = .9;\n\t\t\t\tparam.material.emissiveIntensity = .6;\n\t\t\t}\n\t\t// }\n\t\tvar mHeight = window.innerHeight;\n\t\tthis.setState({\n\t      modalTop: this.mouse.y - (mHeight*0.5) + \"px\",\n\t      modalLeft:this.mouse.x - (mHeight*0.5) + \"px\",\n\t      petitDisplay:\"none\",\n\t       projectTitle: projectTitles2[n]\n\t    });\n\t\t\n\t}\n goEvent2 = (ev, param, tf, n) => {\n \tif (param){\n \t\tif (tf){\n\t\t\t\tparam.material.emissive.r = 1;\n\t\t\t\tparam.material.emissive.g = 1;\n\t\t\t\tparam.material.emissive.b = 1;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}else{\n\t\t\t\tparam.material.emissive.r = .0;\n\t\t\t\tparam.material.emissive.g = .0;\n\t\t\t\tparam.material.emissive.b = .0;\n\t\t\t\tparam.material.emissiveIntensity = 1;\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\tthis.setState({\n\t      petitDisplay:\"none\"\n\t    });\n\t\t\n\t}\n\tgoEventClicked = (ev, param, n) => {\n\n\t\t\tthis.setState({\n\t      // display: \"display\",\n\t      // uterusImg: \"/textures/mat/\"+projectTitles[n] +\"_mat.png\",\n\t      // projectTitle: projectTitles2[n],\n\t      // projectLink: projectLinks[n],\n\t      // marqueeTxt:projectTitles2[n],\n\t      // marqueePointer:\"inherit\"\n\t    });\n\t\t// }\n\t\t\n\t}\n\ttitleClicked = (param) => {\n\n\t\tvar n = focusCounter % 7;\n\t\t\tthis.setState({\n\t      display: \"display\",\n\t      uterusImg: \"/textures/mat/\"+projectTitles[n] +\"_mat.png\",\n\t      projectTitle: projectTitles2[n],\n\t      projectLink: projectLinks[n],\n\t      marqueeTxt:projectTitles2[n],\n\t      marqueePointer:\"inherit\"\n\t    });\n\t\t// }\n\t\t\n\t}\n\n  startAnimationLoop = () => {\n  \t\n \t\n\t\tthis.targetX = this.mouseX * .001;\n\t\tthis.targetY = this.mouseY * .001;\n\n\t\tvar delta = this.clock.getDelta() * 0.01 * 1;\n\t\tif ( this.mesh ) {\n\n\t\t\tif (isBrowser) {\n\t\t\t\tthis.mesh.rotation.y += 0.05 * ( this.targetX - this.mesh.rotation.y );\n\t\t\t\tthis.mesh.rotation.x += 0.05 * ( this.targetY - this.mesh.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh.material.time += delta;\n\t\t\tif(this.mesh.selected){\n\t\t\t\t// console.log(\"it's selected\");\n\t\t\t\t// if(this.mesh.material.scale<5){\n\t\t\t\t// \tthis.mesh.material.scale += delta*300;\n\t\t\t\t// }\n\t\t\t\t// this.mesh.material.userData.uScale.value = this.mesh.material.scale;\n\t\t\t}else{\n\t\t\t\t// console.log(\"it's not selected\");\n\t\t\t\t// if(this.mesh.material.scale>2.5){\n\t\t\t\t// \tthis.mesh.material.scale -= delta*300;\n\t\t\t\t// }\n\t\t\t\t// this.mesh.material.userData.uScale.value = this.mesh.material.scale;\n\t\t\t}\n\t\t\t\n\t\t\tthis.mesh.material.userData.uTime.value = this.mesh.material.time;\n\t\t\t\n\t\t\tthis.mesh.material.needsUpdate = true;\n\t\t\t// console.log(\"color\", this.mesh.material.scale);\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh4 ) {\n\n\t\t\tif (isBrowser) {\n\t\t\t\tthis.mesh4.rotation.y += 0.05 * ( this.targetX - this.mesh4.rotation.y );\n\t\t\t\tthis.mesh4.rotation.x += 0.05 * ( this.targetY - this.mesh4.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh4.material.time += delta\n\t\t\tthis.mesh4.material.userData.uTime.value = this.mesh4.material.time;\n\t\t\tthis.mesh4.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh5 ) {\n\n\t\t\tif (isBrowser) {\n\t\t\t\tthis.mesh5.rotation.y += 0.05 * ( this.targetX - this.mesh5.rotation.y );\n\t\t\t\tthis.mesh5.rotation.x += 0.05 * ( this.targetY - this.mesh5.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh5.rotation.y = this.mesh3.rotation.y + Math.PI;\n\t\t\tthis.mesh5.material.time += delta\n\t\t\tthis.mesh5.material.userData.uTime.value = this.mesh5.material.time;\n\t\t\tthis.mesh5.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh2 ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.mesh2.rotation.y += 0.05 * ( this.targetX - this.mesh2.rotation.y );\n\t\t\t\tthis.mesh2.rotation.x += 0.05 * ( this.targetY - this.mesh2.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh2.material.time += delta\n\t\t\tthis.mesh2.material.userData.uTime.value = this.mesh2.material.time;\n\t\t\tthis.mesh2.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\t\tif ( this.mesh3 ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.mesh3.rotation.y += 0.05 * ( this.targetX - this.mesh3.rotation.y );\n\t\t\t\tthis.mesh3.rotation.x += 0.05 * ( this.targetY - this.mesh3.rotation.x );\n\t\t\t}\n\n\t\t\tthis.mesh3.material.time += delta\n\t\t\tthis.mesh3.material.userData.uTime.value = this.mesh3.material.time;\n\t\t\tthis.mesh3.material.needsUpdate = true;\n\t\t\t\n\n\t\t}\n\n\t\tif ( this.meshGLTF ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.meshGLTF.rotation.y += 0.05 * ( this.targetX - this.meshGLTF.rotation.y );\n\t\t\t\tthis.meshGLTF.rotation.x += 0.05 * ( this.targetY - this.meshGLTF.rotation.x );\n\t\t\t}\n\n\t\t\tthis.meshGLTF.material.time += delta;\n\n\t\t}\n\t\tif ( this.meshGLTF2 ) {\n\n\t\t\tif (isBrowser){\n\t\t\t\tthis.meshGLTF2.rotation.y += 0.05 * ( this.targetX - this.meshGLTF2.rotation.y );\n\t\t\t\tthis.meshGLTF2.rotation.x += 0.05 * ( this.targetY - this.meshGLTF2.rotation.x );\n\t\t\t}\n\n\t\t\tthis.meshGLTF2.material.time += delta;\n\n\t\t}\n\t    this.renderer.render(this.scene, this.camera);\n\t    this.stats.end();\n\n    // The window.requestAnimationFrame() method tells the browser that you wish to perform\n    // an animation and requests that the browser call a specified function\n    // to update an animation before the next repaint\n    this.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n\n  };\n\n  removeModal = () => {\n  \t// console.log(\"jey\");\n  \tthis.setState({\n\t      display: \"none\",\n\t      marqueeTxt:\"th Daddy Master Class  Try\",\n\t      marqueePointer:\"pointer\"\n\t    });\n  }\n  test = () =>{\n  \t// console.log(\"hey for test\");\n  \tthis.setState({\n\t      tableDisplay: \"none\"\n\t    });\n  \ttableShow = !tableShow;\n  }\n\n  changeRowColor=()=>{\n  \tif (this.state.rowColor == \"white\"){\n  \t\tthis.setState({\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor:\"white\",\n\t      rowTextColor:\"black\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}\n  }\n  changeRowColor2=()=>{\n  \tif (this.state.rowColor2 == \"white\"){\n  \t\tthis.setState({\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor2:\"white\",\n\t      rowTextColor2:\"black\",\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}\n  }\n  changeRowColor3=()=>{\n  \tif (this.state.rowColor3 == \"white\"){\n  \t\tthis.setState({\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor3:\"white\",\n\t      rowTextColor3:\"black\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\",\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}\n  }\n  changeRowColor4=()=>{\n  \tif (this.state.rowColor4 == \"white\"){\n  \t\tthis.setState({\n\t      rowColor4:\"transparent\",\n\t      rowTextColor4:\"white\"\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      rowColor4:\"white\",\n\t      rowTextColor4:\"black\",\n\t      rowColor2:\"transparent\",\n\t      rowTextColor2:\"white\",\n\t      rowColor3:\"transparent\",\n\t      rowTextColor3:\"white\",\n\t      rowColor:\"transparent\",\n\t      rowTextColor:\"white\"\n\t    });\n  \t}\n  }\n  handleZIndex = () =>{\n  \t// console.log(\"hey for test\");\n  \tif (this.state.formZIndex < 35000){\n  \t\tthis.setState({\n\t      formZIndex: 40000\n\t    });\n  \t}else{\n  \t\tthis.setState({\n\t      formZIndex: 30000\n\t    });\n  \t}\n  \t\n  }\n\nshowTable = () => {\n  \t// console.log(\"jey\");\n  \tconst width = document.documentElement.clientWidth;\n    \tconst height = document.documentElement.clientHeight;\n  \tif (firstTime){\n  \t\tthis.interval = setInterval(() => this.updateArrow(), 300);\n  \t\t\n  \t\t if(isMobile){\n\t    \tif ((width/height)<1){\n\t    \t\tif (window.innerWidth < 420) {\n\t\t    \t\tthis.setState({\n\t\t\t\t      \tshowTableRow:\"none\",\n\t\t    \t\t\tseTop:\"90px\"\n\t\t\t\t    });\n\t\t    \t\n\t    \t}\n\t    }\n\t    \tif ((width/height)>1){\n\t\t\t\tthis.setState({\n\t\t\t      \tshowTableRow:\"none\",\n\t    \t\t\tseTop:\"90px\",\n\t    \t\t\tshowDesc:\"none\",\n\t    \t\t\ttableFontSize:\"9px\",\n\t    \t\t\tmarqueeFontSize:\"32px\"\n\t\t\t    });\n\t    \t}\n\t    }\n\t    firstTime = false;\n  \t}\n  \tif (tableShow){\n  \t\tthis.setState({\n\t      tableDisplay: \"none\",\n\t      petitDisplay:\"none\"\n\t    });\n\t    tableShow = !tableShow;\n\t    clearInterval(this.interval);\n\t    firstTime = true;\n\t    arrowSymbols = \"\";\n  \t}else{\n  \t\t// if(!creditShow){\n  \t\t\tif (this.state.marqueeTxt == \"th Daddy Master Class  Try\"){\n  \t\t\t\tvar tempCreditShow = this.state.creditDisplay;\n  \t\t\t\tif (creditShow){\n  \t\t\t\t\ttempCreditShow = \"none\";\n  \t\t\t\t\tcreditShow = false;\n  \t\t\t\t}\n  \t\t\t\tif(isMobile){\n\t\t\t    \tif ((width/height)<1){\n\t\t\t\t    \t\tthis.setState({\n\t\t\t\t\t\t      \tshowDesc:\"inherit\"\n\t\t\t\t\t\t    });\n\t\t\t    \t}\n\t\t\t    }\n\t  \t\t\tthis.setState({\n\t\t\t      \ttableDisplay: \"inherit\",\n\t\t      \t\tpetitDisplay:\"none\",\n\t\t      \t\tcreditDisplay:tempCreditShow\n\t\t\t    });\n\t\t\t    tableShow = !tableShow;\n\t  \t\t}\n  \t\t// }\n  \t\t\n  \t}\n  }\n  showCredit = () => {\n  \t// console.log(\"jey\");\n  \tif (creditShow){\n  \t\tthis.setState({\n\t      creditDisplay: \"none\"\n\t    });\n\t    creditShow = !creditShow;\n  \t}else{\n  \t\tif(!tableShow){\n  \t\t\tthis.setState({\n\t\t\t    creditDisplay: \"inherit\"\n\t\t    });\n\t\t    creditShow = !creditShow;\n  \t\t}\n  \t\t\n  \t}\n  }\n\n  toggleMarqueeHover= () =>{\n  \t// console.log(\"marqueeHovered\",marqueeHovered);\n  \tif (marqueeHovered){\n  \t\tthis.setState({\n\t      marqueeHover: \"\"\n\t    });\n\t    marqueeHovered = !marqueeHovered;\n  \t}else{\n  \t\tif (this.state.display != \"display\"){\n  \t\t\tthis.setState({\n\t\t      marqueeHover: \"marqueeHover\"\n\t\t    });\n\t\t    marqueeHovered = !marqueeHovered;\n  \t\t}\n  \t}\n  \t\n  }\n\n  toggleMarqueeHover2= () =>{\n  \t// console.log(\"marqueeHovered\",marqueeHovered);\n  \tif (marqueeHovered2){\n  \t\tthis.setState({\n\t      marqueeHover2: \"\"\n\t    });\n\t    marqueeHovered2 = !marqueeHovered2;\n  \t}else{\n  \t\tif (this.state.display != \"display\"){\n  \t\t\tthis.setState({\n\t\t      marqueeHover2: \"marqueeHover\"\n\t\t    });\n\t\t    marqueeHovered2 = !marqueeHovered2;\n  \t\t}\n  \t}\n  \t\n  }\n\n  handleWindowResize = () => {\n    // const width = this.el.clientWidth;\n    // const height = this.el.clientHeight;\n\tconst width = document.documentElement.clientWidth;\n    const height = document.documentElement.clientHeight;\n    this.setState({\n      wWidth:document.documentElement.clientWidth,\n      wHeight:document.documentElement.clientHeight\n    });\n    if (isMobile){\n    \tINSTANCES = 64;\n    \tgltfScale = 1000;\n    }else if(isBrowser){\n    \tINSTANCES = 128;\n    \tgltfScale = 1500;\n    }\n\n\n    // this.sceneSetup();\n    var elmnt = document.getElementById(\"marquee\");\n    if (elmnt!= undefined){\n    \tvar tableHeight = height - (elmnt.offsetHeight*2) - 6;\n    var tableTop = elmnt.offsetHeight + 6;\n    var showDesc = \"inherit\";\n    var tableFontSize = \"\";\n    var marqueeFontSize = \"\";\n    if (isMobile){\n    \tif ((width / height) > 1){\n\t    \tshowDesc = \"none\";\n\t    \ttableFontSize = \"9px\";\n\t    \tmarqueeFontSize = \"32px\";\n\t    \t// tableHeight = height - (35*2) - 6;\n\t    }\n    }\n    \n    this.setState({\n\t      tableHeight: tableHeight + \"px\",\n\t      tableTop: tableTop +\"px\",\n\t      showDesc: showDesc,\n\t      tableFontSize: tableFontSize,\n\t      marqueeFontSize:marqueeFontSize\n\t    });\n    }\n\n        this.camera.aspect = width / height;\n    // if(isBrowser){\n    \tthis.renderer.setSize(width, height);\n    \tthis.camera.updateProjectionMatrix();\n    \t\n    // }\n  };\n\n  render() {\n\n    return <div style={{overflowY:\"hidden\",width:this.state.wWidth,height:this.state.wHeight}}>\n    <div style={{overflowY:\"hidden\",position:\"fixed\",top:\"0px\",left:\"0px\",width:this.state.wWidth,height:this.state.wHeight}} ref={ref => (this.el = ref)}>\n    </div>\n    \n    <div className={`modal ${this.state.display}`} style={{position:\"fixed\",top:\"0px\",left:\"0px\",width:this.state.wWidth,height:this.state.wHeight, background:\"rgba(49,0,119,0.3)\"}}>\n    <div onClick={this.removeModal} className=\"removeBtn\"><br/></div>\n    <div className=\"thumbnail\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n    <div className=\"excerpt1\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n            <div className=\"thumbnail3\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n    <div className=\"thumbnail5\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n      <div className=\"thumbnail6\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n    \n    <div className=\"thumbnail8\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n    <div className=\"thumbnail2\" style={{backgroundImage:\"url(\"+this.state.uterusImg+\")\"}}></div>\n\n        <div className=\"frame\">\n\n</div>\n         \n\n    </div>\n    <div className={`marquee ${this.state.marqueeHover}`} onClick={this.showTable} onMouseEnter={this.toggleMarqueeHover} onMouseLeave={this.toggleMarqueeHover} id=\"marquee\" style={{fontSize:this.state.marqueeFontSize,cursor:this.state.marqueePointer}}>\n\t  <div>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span style={{display:this.state.marqueeDisplay}}>th Daddy Master Class  Try</span>\n\t  </div>\n\t</div>\n\t<div className={`marquee2 ${this.state.marqueeHover2}`} onClick={this.showTable} onMouseEnter={this.toggleMarqueeHover2} onMouseLeave={this.toggleMarqueeHover2} style={{fontSize:this.state.marqueeFontSize,cursor:this.state.marqueePointer}}>\n\t  <div>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span>{this.state.marqueeTxt}</span>\n\t    <span style={{display:this.state.marqueeDisplay}}>th Daddy Master Class  Try</span>\n\t  </div>\n\t</div>\n\t<div className=\"creditDiv\" style={{display:this.state.creditDisplay}}>\n\t<div className=\"creditDivInner\">\n\t<br />\n\t\tpresented by<br />\n\t\t<a href=\"https://www.instagram.com/eobchae2020/\" target=\"_blank\">eobchae</a><br />\n\t\t<br />\n\t\t<br />\n\t\t<br />\n\t\tcreated by<br />\n\t\t<a href=\"https://www.instagram.com/nahee.app/\" target=\"_blank\">nahee.app</a><br />\n\t\t<br />\n\t\t<br />\n\t\t<br />\n\t\tsupported by<br />\n\t\t<img src=\"support.png\" className=\"support\" /><br />\n\t\t<img src=\"njp_logo.png\" className=\"support2\" /><br />\n\t\t</div>\n\t</div>\n\t<div className=\"creditClose\" onClick={this.showCredit} style={{display:this.state.creditDisplay}}>&nbsp;</div>\n\n\t<div className=\"credit\" onClick={this.showCredit}>\n\t<br />\n\t{this.state.secondRnd}<br />\n\t{this.state.thirdRnd}<br />\n\t{this.state.fourthRnd}<br />\n\t<br />\n\t</div>\n\n\n\t<div className=\"table_container\" style={{display:this.state.tableDisplay, top:this.state.tableTop, height:this.state.tableHeight}}>\n\t<div onClick={this.showTable} className=\"removeBtn2\"><br/></div>\n\t<div id=\"table_div\" style={{fontSize:this.state.tableFontSize}}>\n            \t\t\t<div className=\"gradientWallContainer1\">\n\t\t\t<div className=\"gradientWall\">&nbsp;</div>\n\n\n\n\t\t\t</div>\n\t\t\t<div className=\"gradientWallContainer2\">\n\t\t\t<div className=\"gradientWall2\">&nbsp;</div>\n\n\t\t\t</div>\n\t</div>\n\t\t<ScreenWidth mom={this.test.bind(this)} son={this.handleZIndex.bind(this)}>\n        {(width) => <div className=\"forForm\" style={{zIndex:this.state.formZIndex}}>{width}</div>}\n      </ScreenWidth>\n      <div className=\"classDescription\" style={{display:this.state.showDesc, top:this.state.seTop}}>\n      <br/>\n      \n      <p className=\"reveal\"><span className=\"descSpan\">   2026     </span></p>\n\n <p className=\"reveal\"><span className=\"descSpan\">     .</span></p>\n\n <p className=\"reveal\"><span className=\"descSpan\">        :</span></p>\n\n <p className=\"reveal\"><span className=\"descSpan\">              \n\n    ?</span></p>\n\n<p className=\"reveal\"><span className=\"descSpan\">  2020.12.24 ~ 12.31</span></p> \n \n      </div>\n      <div className=\"arrowForButton\" style={{display:this.state.showDesc}}>\n      <svg class=\"hidden\" viewBox=\"0 0 200 1000\" width=\"200\" height=\"1000\">\n\t\t\t<defs>\n\t\t\t\t<filter id=\"distortionFilter\">\n\t\t\t\t\t<feTurbulence type=\"fractalNoise\" baseFrequency=\"0.03 0.01\" numOctaves=\"2\" seed=\"2\" stitchTiles=\"stitch\" x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\" result=\"noise\"/>\n\t\t\t\t\t<feDisplacementMap in=\"SourceGraphic\" in2=\"noise\" scale=\"26\" data-min-scale=\"0\" data-max-scale=\"100\" xChannelSelector=\"R\" yChannelSelector=\"B\" x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\" filterUnits=\"userSpaceOnUse\"/>\n\t\t\t\t</filter>\n\n\t\t\t</defs>\n\t\t</svg>\n      <svg class=\"svgtext svgtext--2\" data-filter-type=\"distortion\" width=\"120%\" viewBox=\"0 0 200 1000\">\n\t\t\t<path id=\"text-curve2\" d=\"M52.12,14.77C159.65,195.17,185.07,417,149.35,624c-5.21,30.18-11.65,60.16-20.31,89.53-8.52,28.91-19.14,57.13-29.76,85.33l-68.55,182\" fill=\"none\"/>\n\t\t\t<text filter=\"url(#distortionFilter)\" fill=\"rgba(255,255,255,.4)\">\n\t\t\t\t<textPath href=\"#text-curve2\" y=\"36\" style={{overflow:\"visible\"}}>\n\t\t\t\t{this.state.mymyText}\n\t\t\t\t</textPath>\n\t\t\t</text>\n\t\t</svg>\n      </div>\n\n\t</div>\n    <div className={`logoContainer ${this.state.logoOpacity}`} style={{background:\"black\",overflowY:\"hidden\",position:\"fixed\",top:\"0px\",left:\"0px\",width:this.state.wWidth,height:this.state.wHeight}}>\n\n    <div className=\"logoContainerInner\">\n    <img src=\"drd_logo_s.png\" className={`drdLogo ${this.state.drdLogo}`} />\n    </div>\n    \n      </div>\n\n\n    </div>\n  }\n}\n\nconst PlacentaNowhay = withOrientationChange(PlacentaNo)\n\nexport default PlacentaNowhay\n\n// export default PlacentaNo;\n","import React, { Component , Fragment} from 'react';\nimport ReactDOM from 'react-dom'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Link\n} from 'react-router-dom';\nimport './App.scss';\n\nimport createClass from 'create-react-class';\n\nimport PlacentaNoClass from './components/PlacentaNoClass';\nimport PlacentaNo from './components/PlacentaNo';\nimport SubText from './components/SubText';\n\nvar App = createClass({\n    render: function () {\n    return (\n      <Router>\n        <div id=\"app\" className=\"App\" style={{margin:\"0px auto\"}}>\n          <Fragment>\n              <Switch>\n              <Route exact path=\"/\" exact render={() => (\n\n                  <PlacentaNoClass></PlacentaNoClass>\n                )} />\n               <Route exact path=\"/test\" exact render={() => (\n\n                  <PlacentaNo></PlacentaNo>\n                )} />\n            \n\n                </Switch>\n              </Fragment>\n            </div>\n          </Router>\n\n        )}\n})\n\nexport default App;\n","import React from 'react'\nimport { ScreenWidth } from './ScreenWidth';\n\nclass SubText extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleEmailChange = this.handleEmailChange.bind(this);\n\t    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n\t    this.state = {\n\t      email:'',\n\t      password:''\n\t    };\n\t}\n\n\tcomponentDidMount() {\n\t}\n\n\thandleEmailChange(e){\n\t    this.setState({email:e.target.value})\n\t}\n\thandlePasswordChange(e){\n\t    this.setState({password:e.target.value})\n\t}\n\n\tsignIn(){\n\t    this.props.onLogin(this.state.email, this.state.password);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<ScreenWidth>\n        {(width) => <div className=\"forForm\">{width}</div>}\n      </ScreenWidth>\n\t\t);\n\t}\n\n    \n}\n\nexport default SubText","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}